(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var se,v,He,j,we,te={},Ne=[],rt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function $(e,t){for(var n in t)e[n]=t[n];return e}function Ue(e){var t=e.parentNode;t&&t.removeChild(e)}function ot(e,t,n){var i,s,r,c={};for(r in t)r=="key"?i=t[r]:r=="ref"?s=t[r]:c[r]=t[r];if(arguments.length>2&&(c.children=arguments.length>3?se.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)c[r]===void 0&&(c[r]=e.defaultProps[r]);return K(e,c,i,s,null)}function K(e,t,n,i,s){var r={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++He};return s==null&&v.vnode!=null&&v.vnode(r),r}function it(){return{current:null}}function Y(e){return e.children}function Q(e,t){this.props=e,this.context=t}function G(e,t){if(t==null)return e.__?G(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?G(e):null}function Fe(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Fe(e)}}function be(e){(!e.__d&&(e.__d=!0)&&j.push(e)&&!ne.__r++||we!==v.debounceRendering)&&((we=v.debounceRendering)||setTimeout)(ne)}function ne(){for(var e;ne.__r=j.length;)e=j.sort(function(t,n){return t.__v.__b-n.__v.__b}),j=[],e.some(function(t){var n,i,s,r,c,l;t.__d&&(c=(r=(n=t).__v).__e,(l=n.__P)&&(i=[],(s=$({},r)).__v=r.__v+1,pe(l,r,s,n.__n,l.ownerSVGElement!==void 0,r.__h!=null?[c]:null,i,c??G(r),r.__h),qe(i,r),r.__e!=c&&Fe(r)))})}function Pe(e,t,n,i,s,r,c,l,a,f){var o,d,u,_,h,m,y,b=i&&i.__k||Ne,g=b.length;for(n.__k=[],o=0;o<t.length;o++)if((_=n.__k[o]=(_=t[o])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?K(null,_,null,null,_):Array.isArray(_)?K(Y,{children:_},null,null,null):_.__b>0?K(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_)!=null){if(_.__=n,_.__b=n.__b+1,(u=b[o])===null||u&&_.key==u.key&&_.type===u.type)b[o]=void 0;else for(d=0;d<g;d++){if((u=b[d])&&_.key==u.key&&_.type===u.type){b[d]=void 0;break}u=null}pe(e,_,u=u||te,s,r,c,l,a,f),h=_.__e,(d=_.ref)&&u.ref!=d&&(y||(y=[]),u.ref&&y.push(u.ref,null,_),y.push(d,_.__c||h,_)),h!=null?(m==null&&(m=h),typeof _.type=="function"&&_.__k===u.__k?_.__d=a=Ve(_,a,e):a=Oe(e,_,u,b,h,a),typeof n.type=="function"&&(n.__d=a)):a&&u.__e==a&&a.parentNode!=e&&(a=G(u))}for(n.__e=m,o=g;o--;)b[o]!=null&&je(b[o],b[o]);if(y)for(o=0;o<y.length;o++)We(y[o],y[++o],y[++o])}function Ve(e,t,n){for(var i,s=e.__k,r=0;s&&r<s.length;r++)(i=s[r])&&(i.__=e,t=typeof i.type=="function"?Ve(i,t,n):Oe(n,i,i,s,i.__e,t));return t}function Oe(e,t,n,i,s,r){var c,l,a;if(t.__d!==void 0)c=t.__d,t.__d=void 0;else if(n==null||s!=r||s.parentNode==null)e:if(r==null||r.parentNode!==e)e.appendChild(s),c=null;else{for(l=r,a=0;(l=l.nextSibling)&&a<i.length;a+=1)if(l==s)break e;e.insertBefore(s,r),c=r}return c!==void 0?c:s.nextSibling}function st(e,t,n,i,s){var r;for(r in n)r==="children"||r==="key"||r in t||re(e,r,null,n[r],i);for(r in t)s&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===t[r]||re(e,r,t[r],n[r],i)}function ke(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||rt.test(t)?n:n+"px"}function re(e,t,n,i,s){var r;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ke(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||ke(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i||e.addEventListener(t,r?Me:Se,r):e.removeEventListener(t,r?Me:Se,r);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,n))}}function Se(e){this.l[e.type+!1](v.event?v.event(e):e)}function Me(e){this.l[e.type+!0](v.event?v.event(e):e)}function pe(e,t,n,i,s,r,c,l,a){var f,o,d,u,_,h,m,y,b,g,L,z,C,A,R,w=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(a=n.__h,l=t.__e=n.__e,t.__h=null,r=[l]),(f=v.__b)&&f(t);try{e:if(typeof w=="function"){if(y=t.props,b=(f=w.contextType)&&i[f.__c],g=f?b?b.props.value:f.__:i,n.__c?m=(o=t.__c=n.__c).__=o.__E:("prototype"in w&&w.prototype.render?t.__c=o=new w(y,g):(t.__c=o=new Q(y,g),o.constructor=w,o.render=lt),b&&b.sub(o),o.props=y,o.state||(o.state={}),o.context=g,o.__n=i,d=o.__d=!0,o.__h=[],o._sb=[]),o.__s==null&&(o.__s=o.state),w.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=$({},o.__s)),$(o.__s,w.getDerivedStateFromProps(y,o.__s))),u=o.props,_=o.state,d)w.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(w.getDerivedStateFromProps==null&&y!==u&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(y,g),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(y,o.__s,g)===!1||t.__v===n.__v){for(o.props=y,o.state=o.__s,t.__v!==n.__v&&(o.__d=!1),o.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(k){k&&(k.__=t)}),L=0;L<o._sb.length;L++)o.__h.push(o._sb[L]);o._sb=[],o.__h.length&&c.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(y,o.__s,g),o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(u,_,h)})}if(o.context=g,o.props=y,o.__v=t,o.__P=e,z=v.__r,C=0,"prototype"in w&&w.prototype.render){for(o.state=o.__s,o.__d=!1,z&&z(t),f=o.render(o.props,o.state,o.context),A=0;A<o._sb.length;A++)o.__h.push(o._sb[A]);o._sb=[]}else do o.__d=!1,z&&z(t),f=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++C<25);o.state=o.__s,o.getChildContext!=null&&(i=$($({},i),o.getChildContext())),d||o.getSnapshotBeforeUpdate==null||(h=o.getSnapshotBeforeUpdate(u,_)),R=f!=null&&f.type===Y&&f.key==null?f.props.children:f,Pe(e,Array.isArray(R)?R:[R],t,n,i,s,r,c,l,a),o.base=t.__e,t.__h=null,o.__h.length&&c.push(o),m&&(o.__E=o.__=null),o.__e=!1}else r==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ct(n.__e,t,n,i,s,r,c,a);(f=v.diffed)&&f(t)}catch(k){t.__v=null,(a||r!=null)&&(t.__e=l,t.__h=!!a,r[r.indexOf(l)]=null),v.__e(k,t,n)}}function qe(e,t){v.__c&&v.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(i){i.call(n)})}catch(i){v.__e(i,n.__v)}})}function ct(e,t,n,i,s,r,c,l){var a,f,o,d=n.props,u=t.props,_=t.type,h=0;if(_==="svg"&&(s=!0),r!=null){for(;h<r.length;h++)if((a=r[h])&&"setAttribute"in a==!!_&&(_?a.localName===_:a.nodeType===3)){e=a,r[h]=null;break}}if(e==null){if(_===null)return document.createTextNode(u);e=s?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,u.is&&u),r=null,l=!1}if(_===null)d===u||l&&e.data===u||(e.data=u);else{if(r=r&&se.call(e.childNodes),f=(d=n.props||te).dangerouslySetInnerHTML,o=u.dangerouslySetInnerHTML,!l){if(r!=null)for(d={},h=0;h<e.attributes.length;h++)d[e.attributes[h].name]=e.attributes[h].value;(o||f)&&(o&&(f&&o.__html==f.__html||o.__html===e.innerHTML)||(e.innerHTML=o&&o.__html||""))}if(st(e,u,d,s,l),o)t.__k=[];else if(h=t.props.children,Pe(e,Array.isArray(h)?h:[h],t,n,i,s&&_!=="foreignObject",r,c,r?r[0]:n.__k&&G(n,0),l),r!=null)for(h=r.length;h--;)r[h]!=null&&Ue(r[h]);l||("value"in u&&(h=u.value)!==void 0&&(h!==e.value||_==="progress"&&!h||_==="option"&&h!==d.value)&&re(e,"value",h,d.value,!1),"checked"in u&&(h=u.checked)!==void 0&&h!==e.checked&&re(e,"checked",h,d.checked,!1))}return e}function We(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(i){v.__e(i,n)}}function je(e,t,n){var i,s;if(v.unmount&&v.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||We(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){v.__e(r,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&je(i[s],t,n||typeof e.type!="function");n||e.__e==null||Ue(e.__e),e.__=e.__e=e.__d=void 0}function lt(e,t,n){return this.constructor(e,n)}function at(e,t,n){var i,s,r;v.__&&v.__(e,t),s=(i=typeof n=="function")?null:n&&n.__k||t.__k,r=[],pe(t,e=(!i&&n||t).__k=ot(Y,null,[e]),s||te,te,t.ownerSVGElement!==void 0,!i&&n?[n]:s?null:t.firstChild?se.call(t.childNodes):null,r,!i&&n?n:s?s.__e:t.firstChild,i),qe(r,e)}se=Ne.slice,v={__e:function(e,t,n,i){for(var s,r,c;t=t.__;)if((s=t.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(e)),c=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,i||{}),c=s.__d),c)return s.__E=s}catch(l){e=l}throw e}},He=0,Q.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=$({},this.state),typeof e=="function"&&(e=e($({},n),this.props)),e&&$(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),be(this))},Q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),be(this))},Q.prototype.render=Y,j=[],ne.__r=0;const _t="modulepreload",ft=function(e){return"/"+e},Re={},ut=function(t,n,i){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=ft(r),r in Re)return;Re[r]=!0;const c=r.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!i)for(let o=s.length-1;o>=0;o--){const d=s[o];if(d.href===r&&(!c||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":_t,c||(f.as="script",f.crossOrigin=""),f.href=r,document.head.appendChild(f),c)return new Promise((o,d)=>{f.addEventListener("load",o),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function dt(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:s,onRegisteredSW:r,onRegisterError:c}=e;let l,a;const f=async(d=!0)=>{await a};async function o(){if("serviceWorker"in navigator){const{Workbox:d}=await ut(()=>import("./workbox-window.prod.es5-295a6886.js"),[]);l=new d("./sw.js",{scope:"./",type:"classic"}),l.addEventListener("activated",u=>{!u.isUpdate&&u.isExternal||u.isUpdate?window.location.reload():i==null||i()}),l.register({immediate:t}).then(u=>{r?r("./sw.js",u):s==null||s(u)}).catch(u=>{c==null||c(u)})}}return a=o(),f}const ht=async(e,t)=>new AudioContext(t).decodeAudioData(await e.arrayBuffer()),Ge=e=>{const t=document.createElement("canvas"),n=t.getContext("2d",e);return[t,n]},Ye=()=>{const e=new Map;return{emit(t,...n){var i;(i=e.get(t))==null||i.forEach(s=>s(...n))},on(t,n){e.set(t,[...e.get(t)??[],n])},off(t,n){var i;e.set(t,((i=e.get(t))==null?void 0:i.filter(s=>s!==n))??[])},unbindAll(){e.clear()}}},pt=e=>{let t=-1;const n=()=>{e(),t=requestAnimationFrame(n)};return t=requestAnimationFrame(n),()=>cancelAnimationFrame(t)},mt=96e3,Ze="RealtimeSpectrumRenderer",gt=(e,t)=>{const[n,i]=Ge(),{on:s,off:r,emit:c}=Ye();let l=!1,a,f,o;const d={smoothingTimeConstant:0,fftSize:2**12,minDecibels:-120,maxDecibels:-20};let u=-1,_=0;const h={start:0,end:0},m=[],y=()=>{a&&f&&c("update",{canvas:n,time:h,audioContext:a,audioAnalyzer:f,bufferSize:_})},b=(C,A)=>{if(n.width=C,n.height=A,!m.length)return;const R=m.slice(-C),w=new ImageData(R.length,A);for(let k=0;k<w.data.length;k+=4){const x=A-Math.floor(k/4/w.width),E=k/4%w.width,B=R[E],O=B.buffer.length/w.height,D=B.buffer[Math.floor(x*O)];if(D){const M=e[D];w.data.set(M,k)}else w.data.set(t,k)}u=Math.min(R.length-1),i.putImageData(w,0,0),y()},g=async()=>{await L(),await(a==null?void 0:a.close()),f=void 0,a=void 0,l=!1,c("destroy")},L=async()=>{l=!1,o==null||o(),c("stop")};return{on:s,off:r,name:Ze,analyzerOptions:d,resize:b,start:async()=>{if(l)return;const C=performance.now();l=!0;const A=await navigator.mediaDevices.getUserMedia({audio:{deviceId:"default"}});await(a==null?void 0:a.close()),a=new AudioContext({sampleRate:mt});const R=f=a.createAnalyser();a.createMediaStreamSource(A).connect(f),o=pt(()=>{var H;const{height:k,width:x}=n,E=new Uint8Array(R.frequencyBinCount),B=new ImageData(1,k),O=E.length/k,D=Math.ceil(performance.now()-C);Object.assign(R,d),R.getByteFrequencyData(E);for(let T=0;T<k;T++){const Z=E[Math.floor(T*O)],q=(k-T-1)*4;if(Z){const ae=e[Z];B.data.set(ae,q)}else B.data.set(t,q)}const M=m.length?(((H=m.at(-1))==null?void 0:H.at)??0)/1e3/m.length:0;u===x-1?(i.globalCompositeOperation="copy",i.drawImage(n,-1,0),i.putImageData(B,u,0),i.globalCompositeOperation="source-over",h.end=M*m.length,h.start=M*(m.length-x)):(i.putImageData(B,++u,0),h.end=M*x),m.push({buffer:E,at:D}),_+=E.length,y()}),c("start")},stop:L,destroy:g,isRecording:()=>l}},ue=e=>typeof e=="object"&&(e==null?void 0:e.name)===Ze,vt=(e,t,n)=>{let i=-1;for(let r=0;r<e.length;r++){const c=e[r];for(let l=0;l<c.length;l++){const a=l/c.length*(t/2);c[l]>n&&a>i&&(i=a)}}let s=2;for(;s/2<=i;)s*=2;return s},X=192e3,yt=14,Xe="AudioFileSpectrumRenderer",wt=e=>{let t=2;for(;t/2<=e;)t*=2;return t},bt=e=>{const[t,n]=Ge(),{on:i,off:s,emit:r}=Ye();let c=!1,l=!1,a=X,f,o,d,u,_,h,m;const y=()=>{u&&f&&o&&d&&r("update",{canvas:t,audioFile:u,audioContext:f,audioAnalyzer:o,audioBuffer:d,audio:m,sampleRate:a})},b=async(w=u)=>{if(c||!w)return;_&&URL.revokeObjectURL(_),m==null||m.pause(),r("pause"),r("start"),m=void 0,_=void 0,l=!1,c=!0,u=w,d=await ht(w,{sampleRate:X});const{width:k,height:x}=t,E=new Array(k);f=new OfflineAudioContext(d),o=f.createAnalyser(),o.connect(f.destination),o.fftSize=wt(x),o.smoothingTimeConstant=0,o.minDecibels=-120,o.maxDecibels=-20;const B=d.duration/E.length,O=o.frequencyBinCount;for(let M=0;M<E.length;M++){const H=M*B;f.suspend(H).then(()=>{f==null||f.resume(),o==null||o.getByteFrequencyData(E[M]=new Uint8Array(O))})}const D=f.createBufferSource();D.buffer=d,D.connect(o),D.start(),await f.startRendering(),a=vt(E,X,yt),h=new ImageData(k,x);for(let M=0;M<k;M++){const H=E[M];for(let T=0;T<x;T++){const Z=Math.floor(T*(a/X)),q=H[Z];if(q){const ae=(M+(x-T-1)*k)*4,nt=e[q];h.data.set(nt,ae)}}}n.putImageData(h,0,0),c=!1,r("stop"),y()},g=async()=>{c||!u||!h||l||(_=_??URL.createObjectURL(u),m=m??new Audio(_),r("beforePlay"),m.addEventListener("timeupdate",()=>{if(!h||!m)return;n.putImageData(h,0,0);const w=Math.floor(m.currentTime/m.duration*t.width);w&&(n.fillStyle="white",n.fillRect(w,0,1,t.height)),y()}),await m.play(),l=!0,r("play"))},L=()=>{m==null||m.pause(),l=!1,_&&URL.revokeObjectURL(_),r("pause")};return{on:i,off:s,name:Xe,sampleRate:a,resize:(w,k)=>{t.width=w,t.height=k,b()},render:b,destroy:()=>{L(),c=!1,r("destroy")},play:g,pause:L,rewind:()=>{m&&(m.currentTime=0)},setVolume:w=>{m&&(m.volume=w)},isPlaying:()=>l,isRendering:()=>c}},W=e=>typeof e=="object"&&(e==null?void 0:e.name)===Xe,_e=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),kt=(e,t,n)=>{let i,s,r;if(t===0)i=s=r=n;else{const c=n<.5?n*(1+t):n+t-n*t,l=2*n-c;i=_e(l,c,e+1/3),s=_e(l,c,e),r=_e(l,c,e-1/3)}return[Math.round(i*255),Math.round(s*255),Math.round(r*255)]},U=e=>e*window.devicePixelRatio,Ee=270,Ae=300,Ke=new Array(256);for(let e=0;e<=255;e++){const t=Ke[255-e]=new Uint8ClampedArray(4),n=e/255*Ae,i=n>Ee?.5*((300-n)/(Ae-Ee)):.5;t.set(kt(n/360,1,i),0),t[3]=255}const me=`${U(10)}px monospace`,F=Ke,St=new Uint8ClampedArray([0,0,0,255]),ce=({width:e,height:t},{top:n,left:i,bottom:s,right:r})=>new DOMRect(i,n,e-i-r,t-n-s),ge=(e,t)=>{let n=2;for(;;){const i=n*2+n%2;if(t/i<e)break;n=i}return[n,t/n]},Mt={minDecibels:-120,maxDecibels:-20},Rt=({context:e,margin:t,layout:n,decibelRange:i=Mt})=>{const s=ce(e.canvas,t),r=s.right+10,c=s.top-1,l=r+n.width,a=s.bottom+1,f=e.createLinearGradient(r,c,l,a);for(let _=0;_<F.length;_++){const[h,m,y]=F[F.length-_-1];f.addColorStop(_/F.length,`rgb(${h}, ${m}, ${y})`)}e.fillStyle=f,e.fillRect(r,c,n.width,s.height),e.textAlign="left",e.textBaseline="middle",e.font=me;const[o,d]=ge(n.tickMinDistance,s.height),u=i.minDecibels-i.maxDecibels;for(let _=0;_<=o;_++){const h=c+_*d,m=`${Math.floor(_/o*u+i.maxDecibels)} dB`;e.fillStyle=f,e.fillRect(l,h,n.tickLength,n.tickThickness),e.fillStyle="white",e.fillText(m,l+n.tickLength+2,h+1)}},Et=({context:e,margin:t,layout:n,sampleRate:i=96e3})=>{const s=ce(e.canvas,t),r=s.height+1,c=i/2/1e3,[l,a]=ge(n.tickMinDistance,r);e.textAlign="right",e.textBaseline="middle";for(let f=0;f<=l;f++){const o=s.top+f*a-1,d=`${Math.floor((l-f)/l*c)} kHz`;e.fillRect(s.left-n.tickLength,o,n.tickLength,n.tickThickness),e.fillText(d,s.left-n.tickLength-2,o+1)}},At=({context:e,margin:t,text:n})=>{e.fillStyle="white",e.textAlign="left",e.textBaseline="bottom",e.font=me,e.fillText(n,t.left,t.top-U(8))},oe=e=>{const t=Math.floor(e);return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`},Lt=({context:e,time:t,layout:n,margin:i,currentTime:s})=>{const r=ce(e.canvas,i),c=t.end-t.start,l=r.width+1,[a,f]=ge(n.tickMinDistance*2,l);e.strokeStyle="white",e.fillStyle="white",e.textAlign="center",e.textBaseline="hanging",e.font=me;const o=[];for(let d=0;d<=a;d++){const u=r.left+d*f-1,_=oe(t.start+d/a*c);e.fillRect(u,r.bottom,n.tickThickness,n.tickLength),e.fillText(_,u,r.bottom+n.tickLength+2),o.push([u,u+e.measureText(_).width])}if(s!==void 0){const d=Math.floor(r.left+s/c*l),u=r.bottom+1,_=n.tickLength/2;e.fillStyle="white",e.fillRect(d,u,n.tickThickness,_);const h=oe(s),m=e.measureText(h);o.some(y=>d+m.width>y[0]&&d<y[1])||e.fillText(h,d,r.bottom+_+2)}};var le,S,fe,Le,ie=0,Qe=[],J=[],xe=v.__b,Be=v.__r,Te=v.diffed,Ce=v.__c,De=v.unmount;function ve(e,t){v.__h&&v.__h(S,e,ie||t),ie=0;var n=S.__H||(S.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:J}),n.__[e]}function P(e){return ie=1,xt(et,e)}function xt(e,t,n){var i=ve(le++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):et(void 0,t),function(r){var c=i.__N?i.__N[0]:i.__[0],l=i.t(c,r);c!==l&&(i.__N=[l,i.__[1]],i.__c.setState({}))}],i.__c=S,!S.u)){S.u=!0;var s=S.shouldComponentUpdate;S.shouldComponentUpdate=function(r,c,l){if(!i.__c.__H)return!0;var a=i.__c.__H.__.filter(function(o){return o.__c});if(a.every(function(o){return!o.__N}))return!s||s.call(this,r,c,l);var f=!1;return a.forEach(function(o){if(o.__N){var d=o.__[0];o.__=o.__N,o.__N=void 0,d!==o.__[0]&&(f=!0)}}),!(!f&&i.__c.props===r)&&(!s||s.call(this,r,c,l))}}return i.__N||i.__}function V(e,t){var n=ve(le++,3);!v.__s&&Je(n.__H,t)&&(n.__=e,n.i=t,S.__H.__h.push(n))}function Bt(e){return ie=5,Tt(function(){return{current:e}},[])}function Tt(e,t){var n=ve(le++,7);return Je(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Ct(){for(var e;e=Qe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ee),e.__H.__h.forEach(de),e.__H.__h=[]}catch(t){e.__H.__h=[],v.__e(t,e.__v)}}v.__b=function(e){S=null,xe&&xe(e)},v.__r=function(e){Be&&Be(e),le=0;var t=(S=e.__c).__H;t&&(fe===S?(t.__h=[],S.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=J,n.__N=n.i=void 0})):(t.__h.forEach(ee),t.__h.forEach(de),t.__h=[])),fe=S},v.diffed=function(e){Te&&Te(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qe.push(t)!==1&&Le===v.requestAnimationFrame||((Le=v.requestAnimationFrame)||Dt)(Ct)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==J&&(n.__=n.__V),n.i=void 0,n.__V=J})),fe=S=null},v.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ee),n.__h=n.__h.filter(function(i){return!i.__||de(i)})}catch(i){t.some(function(s){s.__h&&(s.__h=[])}),t=[],v.__e(i,n.__v)}}),Ce&&Ce(e,t)},v.unmount=function(e){De&&De(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{ee(i)}catch(s){t=s}}),n.__H=void 0,t&&v.__e(t,n.__v))};var Ie=typeof requestAnimationFrame=="function";function Dt(e){var t,n=function(){clearTimeout(i),Ie&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);Ie&&(t=requestAnimationFrame(n))}function ee(e){var t=S,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),S=t}function de(e){var t=S;e.__c=e.__(),S=t}function Je(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function et(e,t){return typeof t=="function"?t(e):t}const It={renderer:void 0,rendererInstance:void 0},he=new Set,$t=e=>{he.forEach(t=>t(e))},zt=e=>{switch(e==null?void 0:e.type){case"file":{const t=bt(F);return requestAnimationFrame(()=>void t.render(e.file)),t}case"realtime":{const t=gt(F,St);return t.start(),t}default:return}},tt=()=>{const[e,t]=P(It),n=async i=>{var r;await((r=e.rendererInstance)==null?void 0:r.destroy());const s=zt(i);$t({...e,renderer:i,rendererInstance:s})};return V(()=>(he.add(t),()=>he.delete(t))),{state:e,changeRenderer:n}},Ht=(e,t=devicePixelRatio)=>{e.width=0,e.height=0;const n=e.getBoundingClientRect(),i=Math.round(t*n.right)-Math.round(t*n.left),s=Math.round(t*n.bottom)-Math.round(t*n.top);return{width:i,height:s}},Nt=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Ut=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Ft=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Pt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],$e=(e,t,n)=>{let i=e;return typeof t=="string"||Array.isArray(t)?i=e.toLocaleString(t,n):(t===!0||n!==void 0)&&(i=e.toLocaleString(void 0,n)),i};function Vt(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,...t};const n=t.bits?t.binary?Pt:Ft:t.binary?Ut:Nt;if(t.signed&&e===0)return` 0 ${n[0]}`;const i=e<0,s=i?"-":t.signed?"+":"";i&&(e=-e);let r;if(t.minimumFractionDigits!==void 0&&(r={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(r={maximumFractionDigits:t.maximumFractionDigits,...r}),e<1){const f=$e(e,t.locale,r);return s+f+" "+n[0]}const c=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=(t.binary?1024:1e3)**c,r||(e=e.toPrecision(3));const l=$e(Number(e),t.locale,r),a=n[c];return s+l+" "+a}const Ot="a",qt={canvas:Ot};var Wt=0;function p(e,t,n,i,s){var r,c,l={};for(c in t)c=="ref"?r=t[c]:l[c]=t[c];var a={type:e,props:l,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Wt,__source:s,__self:i};if(typeof e=="function"&&(r=e.defaultProps))for(c in r)l[c]===void 0&&(l[c]=r[c]);return v.vnode&&v.vnode(a),a}const I={top:U(35),right:U(100),bottom:U(35),left:U(65)},ye={tickMinDistance:50,tickThickness:1,tickLength:10},jt={...ye,width:10},Gt={...ye},Yt=()=>{const[e,t]=P(),n=Bt(null),i=tt(),s=(c,l,a,f,o,d,u=o==null?void 0:o.sampleRate)=>{if(!n.current||!e)return;const _=ce(n.current,I);e.clearRect(0,0,n.current.width,n.current.height),l&&e.drawImage(l,I.left,I.top),e.fillStyle="white",e.strokeStyle="white",e.strokeRect(_.left-.5,_.top-.5,_.width+1,_.height+1),a&&Lt({context:e,margin:I,time:a,currentTime:d==null?void 0:d.currentTime,layout:ye}),Rt({context:e,margin:I,decibelRange:f,layout:jt}),Et({context:e,margin:I,layout:Gt,sampleRate:u}),At({context:e,margin:I,text:c})},r=()=>{var u;if(!n.current||!e)return;const{width:c,height:l}=Ht(n.current),{top:a,right:f,bottom:o,left:d}=I;n.current.width=c,n.current.height=l,s(i.state.renderer?"Loading...":"Activate microphone or select an file to analyze..."),(u=i.state.rendererInstance)==null||u.resize(c-d-f,l-a-o)};return V(()=>(r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r))),V(()=>{var c;t((c=n.current)==null?void 0:c.getContext("2d",{alpha:!1}))},[n]),V(()=>{if(!e)return;const c=i.state.rendererInstance;ue(c)?c.on("update",l=>{const a=l.audioContext.sampleRate.toLocaleString(),f=Vt(l.bufferSize,{minimumFractionDigits:2,maximumFractionDigits:2});s(`Recording with a sample-rate of ${a} (Buffer: ${f})`,l.canvas,l.time,l.audioAnalyzer,l.audioContext)}):W(c)?c.on("update",l=>{const{length:a,duration:f,numberOfChannels:o}=l.audioBuffer,{name:d,type:u}=l.audioFile,{currentTime:_}=l.audio??{currentTime:0},h=a/f*8/1e3,m=`${d} (${u}, ~${l.sampleRate.toLocaleString()} Hz, ${h}kbps, ${o} channels)`+(l.audio?` (playing - ${oe(_)} / ${oe(f)})`:"");s(m,l.canvas,{start:0,end:l.audioBuffer.duration},l.audioAnalyzer,l.audioContext,l.audio,l.sampleRate)}):r()},[i.state.rendererInstance]),p("div",{className:qt.canvas,style:"color: red",children:p("canvas",{ref:n})})},Zt="e",Xt={slider:Zt},Kt=e=>{const t=it();let n=0,i=0;const s=l=>{var a,f;window.addEventListener("pointermove",r),window.addEventListener("pointerup",c),window.addEventListener("pointercancel",c),window.addEventListener("pointerleave",c),i=((a=t.current)==null?void 0:a.getBoundingClientRect().left)??0,n=((f=t.current)==null?void 0:f.clientWidth)??0,r(l)},r=l=>{const a=(l.clientX-i)/n;e.onChange(Math.max(0,Math.min(1,a)))},c=()=>{window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",c),window.removeEventListener("pointercancel",c),window.removeEventListener("pointerleave",c)};return p("div",{ref:t,className:Xt.slider,onPointerDown:s,style:{"--value":e.value}})},Qt=({accept:e,multiple:t}={})=>{const n=document.createElement("input");return document.body.appendChild(n),n.type="file",n.style.display="none",e&&(n.accept=e),t&&(n.multiple=t),new Promise((i,s)=>{n.onchange=()=>{const r=Array.from(n.files??[]);r.length?i(t?r:r[0]):s()},document.body.removeChild(n),n.click()})},Jt="d",en={icon:Jt},tn={mic:p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M12 3a3 3 0 0 0-3 3v4a3 3 0 0 0 6 0V6a3 3 0 0 0-3-3zm0-2a5 5 0 0 1 5 5v4a5 5 0 0 1-10 0V6a5 5 0 0 1 5-5zM3.055 11H5.07a7.002 7.002 0 0 0 13.858 0h2.016A9.004 9.004 0 0 1 13 18.945V23h-2v-4.055A9.004 9.004 0 0 1 3.055 11z"})]}),"mic-off":p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M16.425 17.839A8.941 8.941 0 0 1 13 18.945V23h-2v-4.055A9.004 9.004 0 0 1 3.055 11H5.07a7.002 7.002 0 0 0 9.87 5.354l-1.551-1.55A5 5 0 0 1 7 10V8.414L1.393 2.808l1.415-1.415 19.799 19.8-1.415 1.414-4.767-4.768zm-7.392-7.392l2.52 2.52a3.002 3.002 0 0 1-2.52-2.52zm10.342 4.713l-1.443-1.442c.509-.81.856-1.73.997-2.718h2.016a8.95 8.95 0 0 1-1.57 4.16zm-2.91-2.909l-1.548-1.548c.054-.226.083-.46.083-.703V6a3 3 0 0 0-5.818-1.032L7.686 3.471A5 5 0 0 1 17 6v4a4.98 4.98 0 0 1-.534 2.251z"})]}),play:p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z"})]}),pause:p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h2v6H9V9zm4 0h2v6h-2V9z"})]}),reset:p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"})]}),file:p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M9 2.003V2h10.998C20.55 2 21 2.455 21 2.992v18.016a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 20.993V8l6-5.997zM5.83 8H9V4.83L5.83 8zM11 4v5a1 1 0 0 1-1 1H5v10h14V4h-8z"})]}),"file-music":p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M16 8v2h-3v4.5a2.5 2.5 0 1 1-2-2.45V8h4V4H5v16h14V8h-3zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008V2.992z"})]}),github:p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[p("path",{fill:"none",d:"M0 0h24v24H0z"}),p("path",{d:"M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588-.094-.117.34.427.433.539.19.227.33.365.44.438.204.137.587.196 1.15.14.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308 1.477-.933 2.613-1.226 3.422-1.096.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19.691.936 1.058 2.045 1.058 3.293 0 3.757-1.674 5.665-4.642 6.392.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716 1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446.005-.705c.005-.708.007-1.338.007-1.998 0-.697-.183-1.152-.425-1.36-.661-.57-.326-1.655.54-1.752 2.967-.333 4.337-1.482 4.337-4.66 0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66.865.097 1.201 1.177.544 1.748-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z"})]})},N=e=>p("span",{className:en.icon,children:tn[e.icon]}),nn="b",rn="c",ze={header:nn,gitHubLink:rn},on=()=>{var h,m,y,b;const[e,t]=P(!1),[n,i]=P(!1),[s,r]=P(!1),[c,l]=P(.2),a=tt(),f=()=>{a.changeRenderer(void 0)},o=()=>{Qt({multiple:!1,accept:"audio/*"}).then(g=>{a.changeRenderer({file:g,type:"file"})})},d=()=>{const g=a.state.rendererInstance;ue(g)?g.isRecording()?g.stop():g.start():a.changeRenderer({type:"realtime"})},u=()=>{const g=a.state.rendererInstance;W(g)?g.isPlaying()?g.pause():g.play():a.changeRenderer({type:"realtime"})},_=()=>{W(a.state.rendererInstance)&&a.state.rendererInstance.rewind()};return V(()=>{const g=a.state.rendererInstance;W(g)?(g.on("pause",()=>r(!1)),g.on("beforePlay",()=>g.setVolume(c)),g.on("play",()=>r(!0)),g.on("start",()=>t(!0)),g.on("stop",()=>t(!1)),r(g.isPlaying()),t(g.isRendering())):ue(g)&&(g.on("start",()=>i(!0)),g.on("stop",()=>i(!1)),i(g.isRecording()),t(g.isRecording()))},[(h=a.state.rendererInstance)==null?void 0:h.name]),V(()=>{W(a.state.rendererInstance)&&a.state.rendererInstance.setVolume(c)},[c]),p("div",{className:ze.header,children:[p("button",{onClick:d,children:p(N,{icon:n?"mic":"mic-off"})}),((m=a.state.renderer)==null?void 0:m.type)==="realtime"&&p("button",{onClick:f,children:p(N,{icon:"reset"})}),p("button",{onClick:o,children:p(N,{icon:((y=a.state.renderer)==null?void 0:y.type)==="file"?"file-music":"file"})}),((b=a.state.renderer)==null?void 0:b.type)==="file"&&!e&&p(Y,{children:[p("button",{onClick:u,children:p(N,{icon:s?"pause":"play"})}),p("button",{onClick:_,children:p(N,{icon:"reset"})}),p(Kt,{value:c,onChange:l})]}),p("a",{href:"https://github.com/Simonwep/spectrum",className:ze.gitHubLink,children:p(N,{icon:"github"})})]})},sn="_",cn={app:sn},ln=()=>p("div",{className:cn.app,children:[p(on,{}),p(Yt,{})]});at(p(ln,{}),document.getElementById("app"));dt();
