var gt=Object.defineProperty,vt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var xe=(e,t,n)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t)=>{for(var n in t||(t={}))bt.call(t,n)&&xe(e,n,t[n]);if($e)for(var n of $e(t))wt.call(t,n)&&xe(e,n,t[n]);return e},V=(e,t)=>vt(e,yt(t));const kt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};kt();var Y,m,Ge,Ye,j,Ze,Re,Ke,ee={},Ve=[],St=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function L(e,t){for(var n in t)e[n]=t[n];return e}function Qe(e){var t=e.parentNode;t&&t.removeChild(e)}function _e(e,t,n){var r,i,o,c={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:c[o]=t[o];if(arguments.length>2&&(c.children=arguments.length>3?Y.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)c[o]===void 0&&(c[o]=e.defaultProps[o]);return W(e,c,r,i,null)}function W(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++Ge:i};return i==null&&m.vnode!=null&&m.vnode(o),o}function Et(){return{current:null}}function Z(e){return e.children}function q(e,t){this.props=e,this.context=t}function U(e,t){if(t==null)return e.__?U(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?U(e):null}function Xe(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Xe(e)}}function ue(e){(!e.__d&&(e.__d=!0)&&j.push(e)&&!te.__r++||Re!==m.debounceRendering)&&((Re=m.debounceRendering)||Ze)(te)}function te(){for(var e;te.__r=j.length;)e=j.sort(function(t,n){return t.__v.__b-n.__v.__b}),j=[],e.some(function(t){var n,r,i,o,c,f;t.__d&&(c=(o=(n=t).__v).__e,(f=n.__P)&&(r=[],(i=L({},o)).__v=o.__v+1,me(f,o,i,n.__n,f.ownerSVGElement!==void 0,o.__h!=null?[c]:null,r,c==null?U(o):c,o.__h),rt(r,o),o.__e!=c&&Xe(o)))})}function Je(e,t,n,r,i,o,c,f,a,l){var s,h,d,u,p,y,g,v=r&&r.__k||Ve,b=v.length;for(n.__k=[],s=0;s<t.length;s++)if((u=n.__k[s]=(u=t[s])==null||typeof u=="boolean"?null:typeof u=="string"||typeof u=="number"||typeof u=="bigint"?W(null,u,null,null,u):Array.isArray(u)?W(Z,{children:u},null,null,null):u.__b>0?W(u.type,u.props,u.key,null,u.__v):u)!=null){if(u.__=n,u.__b=n.__b+1,(d=v[s])===null||d&&u.key==d.key&&u.type===d.type)v[s]=void 0;else for(h=0;h<b;h++){if((d=v[h])&&u.key==d.key&&u.type===d.type){v[h]=void 0;break}d=null}me(e,u,d=d||ee,i,o,c,f,a,l),p=u.__e,(h=u.ref)&&d.ref!=h&&(g||(g=[]),d.ref&&g.push(d.ref,null,u),g.push(h,u.__c||p,u)),p!=null?(y==null&&(y=p),typeof u.type=="function"&&u.__k===d.__k?u.__d=a=et(u,a,e):a=nt(e,u,d,v,p,a),typeof n.type=="function"&&(n.__d=a)):a&&d.__e==a&&a.parentNode!=e&&(a=U(d))}for(n.__e=y,s=b;s--;)v[s]!=null&&(typeof n.type=="function"&&v[s].__e!=null&&v[s].__e==n.__d&&(n.__d=U(r,s+1)),it(v[s],v[s]));if(g)for(s=0;s<g.length;s++)ot(g[s],g[++s],g[++s])}function et(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t=typeof r.type=="function"?et(r,t,n):nt(n,r,r,i,r.__e,t));return t}function tt(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(n){tt(n,t)}):t.push(e)),t}function nt(e,t,n,r,i,o){var c,f,a;if(t.__d!==void 0)c=t.__d,t.__d=void 0;else if(n==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==e)e.appendChild(i),c=null;else{for(f=o,a=0;(f=f.nextSibling)&&a<r.length;a+=2)if(f==i)break e;e.insertBefore(i,o),c=o}return c!==void 0?c:i.nextSibling}function $t(e,t,n,r,i){var o;for(o in n)o==="children"||o==="key"||o in t||ne(e,o,null,n[o],r);for(o in t)i&&typeof t[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===t[o]||ne(e,o,t[o],n[o],r)}function Ae(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||St.test(t)?n:n+"px"}function ne(e,t,n,r,i){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ae(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Ae(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?Ce:Be,o):e.removeEventListener(t,o?Ce:Be,o);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,n):e.removeAttribute(t))}}function Be(e){this.l[e.type+!1](m.event?m.event(e):e)}function Ce(e){this.l[e.type+!0](m.event?m.event(e):e)}function me(e,t,n,r,i,o,c,f,a){var l,s,h,d,u,p,y,g,v,b,S,k=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(a=n.__h,f=t.__e=n.__e,t.__h=null,o=[f]),(l=m.__b)&&l(t);try{e:if(typeof k=="function"){if(g=t.props,v=(l=k.contextType)&&r[l.__c],b=l?v?v.props.value:l.__:r,n.__c?y=(s=t.__c=n.__c).__=s.__E:("prototype"in k&&k.prototype.render?t.__c=s=new k(g,b):(t.__c=s=new q(g,b),s.constructor=k,s.render=Rt),v&&v.sub(s),s.props=g,s.state||(s.state={}),s.context=b,s.__n=r,h=s.__d=!0,s.__h=[]),s.__s==null&&(s.__s=s.state),k.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=L({},s.__s)),L(s.__s,k.getDerivedStateFromProps(g,s.__s))),d=s.props,u=s.state,h)k.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(k.getDerivedStateFromProps==null&&g!==d&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(g,b),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(g,s.__s,b)===!1||t.__v===n.__v){s.props=g,s.state=s.__s,t.__v!==n.__v&&(s.__d=!1),s.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(x){x&&(x.__=t)}),s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(g,s.__s,b),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(d,u,p)})}s.context=b,s.props=g,s.state=s.__s,(l=m.__r)&&l(t),s.__d=!1,s.__v=t,s.__P=e,l=s.render(s.props,s.state,s.context),s.state=s.__s,s.getChildContext!=null&&(r=L(L({},r),s.getChildContext())),h||s.getSnapshotBeforeUpdate==null||(p=s.getSnapshotBeforeUpdate(d,u)),S=l!=null&&l.type===Z&&l.key==null?l.props.children:l,Je(e,Array.isArray(S)?S:[S],t,n,r,i,o,c,f,a),s.base=t.__e,t.__h=null,s.__h.length&&c.push(s),y&&(s.__E=s.__=null),s.__e=!1}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=xt(n.__e,t,n,r,i,o,c,a);(l=m.diffed)&&l(t)}catch(x){t.__v=null,(a||o!=null)&&(t.__e=f,t.__h=!!a,o[o.indexOf(f)]=null),m.__e(x,t,n)}}function rt(e,t){m.__c&&m.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){m.__e(r,n.__v)}})}function xt(e,t,n,r,i,o,c,f){var a,l,s,h=n.props,d=t.props,u=t.type,p=0;if(u==="svg"&&(i=!0),o!=null){for(;p<o.length;p++)if((a=o[p])&&"setAttribute"in a==!!u&&(u?a.localName===u:a.nodeType===3)){e=a,o[p]=null;break}}if(e==null){if(u===null)return document.createTextNode(d);e=i?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,d.is&&d),o=null,f=!1}if(u===null)h===d||f&&e.data===d||(e.data=d);else{if(o=o&&Y.call(e.childNodes),l=(h=n.props||ee).dangerouslySetInnerHTML,s=d.dangerouslySetInnerHTML,!f){if(o!=null)for(h={},p=0;p<e.attributes.length;p++)h[e.attributes[p].name]=e.attributes[p].value;(s||l)&&(s&&(l&&s.__html==l.__html||s.__html===e.innerHTML)||(e.innerHTML=s&&s.__html||""))}if($t(e,d,h,i,f),s)t.__k=[];else if(p=t.props.children,Je(e,Array.isArray(p)?p:[p],t,n,r,i&&u!=="foreignObject",o,c,o?o[0]:n.__k&&U(n,0),f),o!=null)for(p=o.length;p--;)o[p]!=null&&Qe(o[p]);f||("value"in d&&(p=d.value)!==void 0&&(p!==e.value||u==="progress"&&!p||u==="option"&&p!==h.value)&&ne(e,"value",p,h.value,!1),"checked"in d&&(p=d.checked)!==void 0&&p!==e.checked&&ne(e,"checked",p,h.checked,!1))}return e}function ot(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){m.__e(r,n)}}function it(e,t,n){var r,i;if(m.unmount&&m.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ot(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){m.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&it(r[i],t,typeof e.type!="function");n||e.__e==null||Qe(e.__e),e.__e=e.__d=void 0}function Rt(e,t,n){return this.constructor(e,n)}function ge(e,t,n){var r,i,o;m.__&&m.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,o=[],me(t,e=(!r&&n||t).__k=_e(Z,null,[e]),i||ee,ee,t.ownerSVGElement!==void 0,!r&&n?[n]:i?null:t.firstChild?Y.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r),rt(o,e)}function st(e,t){ge(e,t,st)}function At(e,t,n){var r,i,o,c=L({},e.props);for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:c[o]=t[o];return arguments.length>2&&(c.children=arguments.length>3?Y.call(arguments,2):n),W(e.type,c,r||e.key,i||e.ref,null)}function Bt(e,t){var n={__c:t="__cC"+Ke++,__:e,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,o;return this.getChildContext||(i=[],(o={})[t]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&i.some(ue)},this.sub=function(c){i.push(c);var f=c.componentWillUnmount;c.componentWillUnmount=function(){i.splice(i.indexOf(c),1),f&&f.call(c)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}Y=Ve.slice,m={__e:function(e,t,n,r){for(var i,o,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),c=i.__d),c)return i.__E=i}catch(f){e=f}throw e}},Ge=0,Ye=function(e){return e!=null&&e.constructor===void 0},q.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=L({},this.state),typeof e=="function"&&(e=e(L({},n),this.props)),e&&L(n,e),e!=null&&this.__v&&(t&&this.__h.push(t),ue(this))},q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ue(this))},q.prototype.render=Z,j=[],Ze=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,te.__r=0,Ke=0;var Ct=Object.freeze(Object.defineProperty({__proto__:null,render:ge,hydrate:st,createElement:_e,h:_e,Fragment:Z,createRef:Et,get isValidElement(){return Ye},Component:q,cloneElement:At,createContext:Bt,toChildArray:tt,get options(){return m}},Symbol.toStringTag,{value:"Module"}));try{self["workbox:window:6.5.2"]&&_()}catch{}function Pe(e,t){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(i){n(i.data)},e.postMessage(t,[r.port2])})}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=function(i,o){if(i){if(typeof i=="string")return Le(i,o);var c=Object.prototype.toString.call(i).slice(8,-1);return c==="Object"&&i.constructor&&(c=i.constructor.name),c==="Map"||c==="Set"?Array.from(i):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Le(i,o):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var ae=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};function ce(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var H=function(e,t){this.type=e,Object.assign(this,t)};function Q(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Mt(){}var Tt={type:"SKIP_WAITING"};function Me(e,t){if(!t)return e&&e.then?e.then(Mt):Promise.resolve()}var Dt=function(e){var t,n;function r(f,a){var l,s;return a===void 0&&(a={}),(l=e.call(this)||this).nn={},l.tn=0,l.rn=new ae,l.en=new ae,l.on=new ae,l.un=0,l.an=new Set,l.cn=function(){var h=l.fn,d=h.installing;l.tn>0||!ce(d.scriptURL,l.sn.toString())||performance.now()>l.un+6e4?(l.vn=d,h.removeEventListener("updatefound",l.cn)):(l.hn=d,l.an.add(d),l.rn.resolve(d)),++l.tn,d.addEventListener("statechange",l.ln)},l.ln=function(h){var d=l.fn,u=h.target,p=u.state,y=u===l.vn,g={sw:u,isExternal:y,originalEvent:h};!y&&l.mn&&(g.isUpdate=!0),l.dispatchEvent(new H(p,g)),p==="installed"?l.wn=self.setTimeout(function(){p==="installed"&&d.waiting===u&&l.dispatchEvent(new H("waiting",g))},200):p==="activating"&&(clearTimeout(l.wn),y||l.en.resolve(u))},l.dn=function(h){var d=l.hn,u=d!==navigator.serviceWorker.controller;l.dispatchEvent(new H("controlling",{isExternal:u,originalEvent:h,sw:d,isUpdate:l.mn})),u||l.on.resolve(d)},l.gn=(s=function(h){var d=h.data,u=h.ports,p=h.source;return Q(l.getSW(),function(){l.an.has(p)&&l.dispatchEvent(new H("message",{data:d,originalEvent:h,ports:u,sw:p}))})},function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];try{return Promise.resolve(s.apply(this,h))}catch(u){return Promise.reject(u)}}),l.sn=f,l.nn=a,navigator.serviceWorker.addEventListener("message",l.gn),l}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,c=r.prototype;return c.register=function(f){var a=(f===void 0?{}:f).immediate,l=a!==void 0&&a;try{var s=this;return function(h,d){var u=h();return u&&u.then?u.then(d):d(u)}(function(){if(!l&&document.readyState!=="complete")return Me(new Promise(function(h){return window.addEventListener("load",h)}))},function(){return s.mn=Boolean(navigator.serviceWorker.controller),s.yn=s.pn(),Q(s.bn(),function(h){s.fn=h,s.yn&&(s.hn=s.yn,s.en.resolve(s.yn),s.on.resolve(s.yn),s.yn.addEventListener("statechange",s.ln,{once:!0}));var d=s.fn.waiting;return d&&ce(d.scriptURL,s.sn.toString())&&(s.hn=d,Promise.resolve().then(function(){s.dispatchEvent(new H("waiting",{sw:d,wasWaitingBeforeRegister:!0}))}).then(function(){})),s.hn&&(s.rn.resolve(s.hn),s.an.add(s.hn)),s.fn.addEventListener("updatefound",s.cn),navigator.serviceWorker.addEventListener("controllerchange",s.dn),s.fn})})}catch(h){return Promise.reject(h)}},c.update=function(){try{return this.fn?Me(this.fn.update()):void 0}catch(f){return Promise.reject(f)}},c.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},c.messageSW=function(f){try{return Q(this.getSW(),function(a){return Pe(a,f)})}catch(a){return Promise.reject(a)}},c.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Pe(this.fn.waiting,Tt)},c.pn=function(){var f=navigator.serviceWorker.controller;return f&&ce(f.scriptURL,this.sn.toString())?f:void 0},c.bn=function(){try{var f=this;return function(a,l){try{var s=a()}catch(h){return l(h)}return s&&s.then?s.then(void 0,l):s}(function(){return Q(navigator.serviceWorker.register(f.sn,f.nn),function(a){return f.un=performance.now(),a})},function(a){throw a})}catch(a){return Promise.reject(a)}},i=r,(o=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&Pt(i.prototype,o),r}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.Sn(n).add(r)},t.removeEventListener=function(n,r){this.Sn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,i=Lt(this.Sn(n.type));!(r=i()).done;)(0,r.value)(n)},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());function It(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisterError:o}=e;let c;const f=async(a=!0)=>{};return"serviceWorker"in navigator&&(c=new Dt("./sw.js",{scope:"./",type:"classic"}),c.addEventListener("activated",a=>{a.isUpdate?window.location.reload():r==null||r()}),c.register({immediate:t}).then(a=>{i==null||i(a)}).catch(a=>{o==null||o(a)})),f}const Ft=async(e,t)=>new AudioContext(t).decodeAudioData(await e.arrayBuffer()),at=e=>{const t=document.createElement("canvas"),n=t.getContext("2d",e);return[t,n]},ct=()=>{const e=new Map;return{emit(t,...n){var r;(r=e.get(t))==null||r.forEach(i=>i(...n))},on(t,n){var r;e.set(t,[...(r=e.get(t))!=null?r:[],n])},off(t,n){var r,i;e.set(t,(i=(r=e.get(t))==null?void 0:r.filter(o=>o!==n))!=null?i:[])},unbindAll(){e.clear()}}},Ut=e=>{let t=-1;const n=()=>{e(),t=requestAnimationFrame(n)};return t=requestAnimationFrame(n),()=>cancelAnimationFrame(t)},Nt=96e3,Ot="RealtimeSpectrumRenderer",Ht=(e,t)=>{const[n,r]=at(),{on:i,off:o,emit:c}=ct(),f={rendering:!1};let a,l,s;const h={smoothingTimeConstant:0,fftSize:2**12,minDecibels:-120,maxDecibels:-20};let d=-1,u=0;const p={start:0,end:0},y=[],g=()=>{a&&l&&c("update",{canvas:n,time:p,audioContext:a,audioAnalyzer:l,bufferSize:u})},v=(x,T)=>{if(n.width=x,n.height=T,!y.length)return;const R=y.slice(-x),A=new ImageData(R.length,T);for(let w=0;w<A.data.length;w+=4){const P=T-Math.floor(w/4/A.width),E=w/4%A.width,C=R[E],N=C.buffer.length/A.height,I=C.buffer[Math.floor(P*N)];if(I){const O=e[I];A.data.set(O,w)}else A.data.set(t,w)}d=Math.min(R.length-1),r.putImageData(A,0,0),g()},b=async()=>{await S(),await(a==null?void 0:a.close()),l=void 0,a=void 0,c("destroy")},S=async()=>{f.rendering=!1,s==null||s(),c("stop")};return{state:f,on:i,off:o,name:Ot,analyzerOptions:h,resize:v,start:async()=>{if(f.rendering)return;const x=performance.now();f.rendering=!0;const T=await navigator.mediaDevices.getUserMedia({audio:{deviceId:"default"}});a==null||a.close(),a=new AudioContext({sampleRate:Nt});const R=l=a.createAnalyser();a.createMediaStreamSource(T).connect(l),s=Ut(()=>{var we,ke;const{height:w,width:P}=n,E=new Uint8Array(R.frequencyBinCount),C=new ImageData(1,w),N=E.length/w,I=Math.ceil(performance.now()-x);Object.assign(R,h),R.getByteFrequencyData(E);for(let K=0;K<w;K++){const Se=E[Math.floor(K*N)],Ee=(w-K-1)*4;if(Se){const mt=e[Se];C.data.set(mt,Ee)}else C.data.set(t,Ee)}const O=y.length?((ke=(we=y.at(-1))==null?void 0:we.at)!=null?ke:0)/1e3/y.length:0;d===P-1?(r.globalCompositeOperation="copy",r.drawImage(n,-1,0),r.putImageData(C,d,0),r.globalCompositeOperation="source-over",p.end=O*y.length,p.start=O*(y.length-P)):(r.putImageData(C,++d,0),p.end=O*P),y.push({buffer:E,at:I}),u+=E.length,g()}),c("start")},stop:S,destroy:b}},zt=96e3,jt="AudioFileSpectrumRenderer",Wt=e=>{const[t,n]=at(),{on:r,off:i,emit:o}=ct(),c={rendering:!1};let f,a,l,s;const h={smoothingTimeConstant:0,minDecibels:-120,maxDecibels:-20},d=v=>{let b=2;for(;b/2<v;)b*=2;return b},u=()=>{s&&f&&a&&l&&o("update",{canvas:t,audioFile:s,audioContext:f,audioAnalyzer:a,audioBuffer:l})},p=async(v=s)=>{if(c.rendering||!v)return;c.rendering=!0,s=v,l=await Ft(v,{sampleRate:zt});const{width:b,height:S}=t,k=new Array(b);f=new OfflineAudioContext(l),a=f.createAnalyser(),a.fftSize=d(S),a.smoothingTimeConstant=0,a.connect(f.destination),Object.assign(a,h);const x=l.duration/k.length,T=a.frequencyBinCount;for(let w=0;w<k.length;w++){const P=w*x;f.suspend(P).then(()=>{f==null||f.resume(),a==null||a.getByteFrequencyData(k[w]=new Uint8Array(T))})}const R=f.createBufferSource();R.buffer=l,R.connect(a),R.start(),await f.startRendering();const A=new ImageData(b,S);for(let w=0;w<b;w++){const P=k[w];for(let E=0;E<S;E++){const C=P[E];if(C){const N=(w+(S-E-1)*b)*4,I=e[C];A.data.set(I,N)}}}n.putImageData(A,0,0),c.rendering=!1,u()};return{state:c,on:r,off:i,name:jt,analyzerOptions:h,resize:(v,b)=>{t.width=v,t.height=b,p()},render:p,destroy:()=>{c.rendering=!1,o("destroy")}}},le=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),qt=(e,t,n)=>{let r,i,o;if(t===0)r=i=o=n;else{const c=n<.5?n*(1+t):n+t-n*t,f=2*n-c;r=le(f,c,e+1/3),i=le(f,c,e),o=le(f,c,e-1/3)}return[Math.round(r*255),Math.round(i*255),Math.round(o*255)]},Te=270,De=300,lt=new Array(256);for(let e=0;e<=255;e++){const t=lt[255-e]=new Uint8ClampedArray(4),n=e/255*De,r=n>Te?.5*((300-n)/(De-Te)):.5;t.set(qt(n/360,1,r),0),t[3]=255}const F=lt,Gt=new Uint8ClampedArray([0,0,0,255]),ie=({width:e,height:t},{top:n,left:r,bottom:i,right:o})=>new DOMRect(r,n,e-r-o,t-n-i),ve=(e,t)=>{let n=2;for(;;){const r=n*2+n%2;if(t/r<e)break;n=r}return[n,t/n]},Yt={minDecibels:-120,maxDecibels:-20},Zt=({context:e,margin:t,layout:n,decibelRange:r=Yt})=>{const i=ie(e.canvas,t),o=i.right+10,c=i.top-1,f=o+n.width,a=i.bottom+1,l=e.createLinearGradient(o,c,f,a);for(let u=0;u<F.length;u++){const[p,y,g]=F[F.length-u-1];l.addColorStop(u/F.length,`rgb(${p}, ${y}, ${g})`)}e.fillStyle=l,e.fillRect(o,c,n.width,i.height),e.textAlign="left",e.textBaseline="middle",e.font="12px monospace";const[s,h]=ve(n.tickMinDistance,i.height),d=r.minDecibels-r.maxDecibels;for(let u=0;u<=s;u++){const p=c+u*h,y=`${Math.floor(u/s*d+r.maxDecibels)} dB`;e.fillStyle=l,e.fillRect(f,p,n.tickLength,n.tickThickness),e.fillStyle="white",e.fillText(y,f+n.tickLength+2,p+1)}},Kt=({context:e,margin:t,layout:n,sampleRate:r=96e3})=>{const i=ie(e.canvas,t),o=i.height+1,[c,f]=ve(n.tickMinDistance,o),a=r/2/1e3;e.textAlign="right",e.textBaseline="middle";for(let l=0;l<=c;l++){const s=i.top+l*f-1,h=`${Math.floor((c-l)/c*a)} kHz`;e.fillRect(i.left-n.tickLength,s,n.tickLength,n.tickThickness),e.fillText(h,i.left-n.tickLength-2,s+1)}},Vt=({context:e,margin:t,text:n})=>{e.fillStyle="white",e.textAlign="left",e.textBaseline="bottom",e.font="12px monospace",e.fillText(n,t.left,t.top-8)},Qt=e=>`${Math.floor(e/60)}:${String(e%60).padStart(2,"0")}`,Xt=({context:e,time:t,layout:n,margin:r})=>{const i=ie(e.canvas,r),o=t.end-t.start,c=i.width+1,[f,a]=ve(n.tickMinDistance*2,c);e.strokeStyle="white",e.fillStyle="white",e.textAlign="center",e.textBaseline="hanging",e.font="12px monospace";for(let l=0;l<=f;l++){const s=i.left+l*a-1,h=Qt(Math.floor(t.start+l/f*o));e.fillRect(s,i.bottom,n.tickThickness,n.tickLength),e.fillText(h,s,i.bottom+n.tickLength+2)}};var se,$,Ie,re=0,_t=[],Fe=m.__b,Ue=m.__r,Ne=m.diffed,Oe=m.__c,He=m.unmount;function ye(e,t){m.__h&&m.__h($,e,re||t),re=0;var n=$.__H||($.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function oe(e){return re=1,Jt(ft,e)}function Jt(e,t,n){var r=ye(se++,2);return r.t=e,r.__c||(r.__=[n?n(t):ft(void 0,t),function(i){var o=r.t(r.__[0],i);r.__[0]!==o&&(r.__=[o,r.__[1]],r.__c.setState({}))}],r.__c=$),r.__}function G(e,t){var n=ye(se++,3);!m.__s&&ut(n.__H,t)&&(n.__=e,n.__H=t,$.__H.__h.push(n))}function en(e){return re=5,tn(function(){return{current:e}},[])}function tn(e,t){var n=ye(se++,7);return ut(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function nn(){for(var e;e=_t.shift();)if(e.__P)try{e.__H.__h.forEach(X),e.__H.__h.forEach(fe),e.__H.__h=[]}catch(t){e.__H.__h=[],m.__e(t,e.__v)}}m.__b=function(e){$=null,Fe&&Fe(e)},m.__r=function(e){Ue&&Ue(e),se=0;var t=($=e.__c).__H;t&&(t.__h.forEach(X),t.__h.forEach(fe),t.__h=[])},m.diffed=function(e){Ne&&Ne(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(_t.push(t)!==1&&Ie===m.requestAnimationFrame||((Ie=m.requestAnimationFrame)||function(n){var r,i=function(){clearTimeout(o),ze&&cancelAnimationFrame(r),setTimeout(n)},o=setTimeout(i,100);ze&&(r=requestAnimationFrame(i))})(nn)),$=null},m.__c=function(e,t){t.some(function(n){try{n.__h.forEach(X),n.__h=n.__h.filter(function(r){return!r.__||fe(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],m.__e(r,n.__v)}}),Oe&&Oe(e,t)},m.unmount=function(e){He&&He(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{X(r)}catch(i){t=i}}),t&&m.__e(t,n.__v))};var ze=typeof requestAnimationFrame=="function";function X(e){var t=$,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),$=t}function fe(e){var t=$;e.__c=e.__(),$=t}function ut(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ft(e,t){return typeof t=="function"?t(e):t}let J={renderer:void 0,rendererInstance:void 0};const de=new Set,je=e=>{J=e,de.forEach(t=>t({}))},dt=()=>{const[,e]=oe({}),t=r=>je(V(D({},J),{renderer:r})),n=r=>je(V(D({},J),{rendererInstance:r}));return G(()=>(de.add(e),()=>de.delete(e))),{state:J,setRenderer:t,setRendererInstance:n}},rn=(e,t=devicePixelRatio)=>{e.width=0,e.height=0;const n=e.getBoundingClientRect(),r=Math.round(t*n.right)-Math.round(t*n.left),i=Math.round(t*n.bottom)-Math.round(t*n.top);return{width:r,height:i}},on=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],sn=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],an=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],cn=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],We=(e,t,n)=>{let r=e;return typeof t=="string"||Array.isArray(t)?r=e.toLocaleString(t,n):(t===!0||n!==void 0)&&(r=e.toLocaleString(void 0,n)),r};function ln(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t=D({bits:!1,binary:!1},t);const n=t.bits?t.binary?cn:an:t.binary?sn:on;if(t.signed&&e===0)return` 0 ${n[0]}`;const r=e<0,i=r?"-":t.signed?"+":"";r&&(e=-e);let o;if(t.minimumFractionDigits!==void 0&&(o={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(o=D({maximumFractionDigits:t.maximumFractionDigits},o)),e<1){const l=We(e,t.locale,o);return i+l+" "+n[0]}const c=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=(t.binary?1024:1e3)**c,o||(e=e.toPrecision(3));const f=We(Number(e),t.locale,o),a=n[c];return i+f+" "+a}const _n="_canvas_neruw_1";var un={canvas:_n};function fn(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var dn=fn(Ct),ht,pt,he=dn,hn=0;function qe(e,t,n,r,i){var o,c,f={};for(c in t)c=="ref"?o=t[c]:f[c]=t[c];var a={type:e,props:f,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--hn,__source:i,__self:r};if(typeof e=="function"&&(o=e.defaultProps))for(c in o)f[c]===void 0&&(f[c]=o[c]);return he.options.vnode&&he.options.vnode(a),a}he.Fragment,pt=qe,ht=qe;const B=pt,pe=ht,M={top:35,right:100,bottom:35,left:65},be={tickMinDistance:50,tickThickness:1,tickLength:10},pn=V(D({},be),{width:10}),mn=D({},be),gn=()=>{const[e,t]=oe(),[n,r]=oe(),i=en(null),o=dt(),c=(a,l,s,h,d)=>{if(!i.current||!n)return;const u=ie(i.current,M);n.clearRect(0,0,i.current.width,i.current.height),l&&n.drawImage(l,M.left,M.top),n.fillStyle="white",n.strokeStyle="white",n.strokeRect(u.left-.5,u.top-.5,u.width+1,u.height+1),s&&Xt({context:n,margin:M,time:s,layout:be}),Zt({context:n,margin:M,decibelRange:h,layout:pn}),Kt({context:n,margin:M,layout:mn,sampleRate:d==null?void 0:d.sampleRate}),Vt({context:n,margin:M,text:a})},f=()=>{if(!i.current||!n)return;const{width:a,height:l}=rn(i.current),{top:s,right:h,bottom:d,left:u}=M;i.current.width=a,i.current.height=l,c("Record audio or select an file to analyze..."),e==null||e.resize(a-u-h,l-s-d)};return G(()=>(f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f))),G(()=>{var a;r((a=i.current)==null?void 0:a.getContext("2d",{alpha:!1}))},[i]),G(()=>{var a;if(!!n)switch(e==null||e.destroy(),(a=o.state.renderer)==null?void 0:a.type){case"realtime":const l=Ht(F,Gt);l.on("update",h=>{const d=h.audioContext.sampleRate.toLocaleString(),u=ln(h.bufferSize,{minimumFractionDigits:2,maximumFractionDigits:2});c(`Recording with a sample-rate of ${d} (Buffer: ${u})`,h.canvas,h.time,h.audioAnalyzer,h.audioContext)}),t(l),o.setRendererInstance(l),l.start();break;case"file":const s=Wt(F);s.on("update",h=>{const d=h.audioBuffer,u=h.audioFile,p=h.audioContext.sampleRate.toLocaleString(),y=d.length/d.duration*8;c(`${u.name} (${u.type}, ${p} Hz, ${y/1e3}kbps, ${d.numberOfChannels} channels)`,h.canvas,{start:0,end:h.audioBuffer.duration},h.audioAnalyzer,h.audioContext)}),t(s),o.setRendererInstance(s),s.render(o.state.renderer.file);break}},[o.state.renderer,n]),B("div",{className:un.canvas,style:"color: red",children:B("canvas",{ref:i})})},vn=({accept:e,multiple:t}={})=>{const n=document.createElement("input");return document.body.appendChild(n),n.type="file",n.style.display="none",e&&(n.accept=e),t&&(n.multiple=t),new Promise((r,i)=>{n.onchange=()=>{var c;const o=Array.from((c=n.files)!=null?c:[]);o.length?r(t?o:o[0]):i()},document.body.removeChild(n),n.click()})},yn="_header_1ae5r_1",bn="_startStop_1ae5r_17",wn="_file_1ae5r_27",kn="_realtime_1ae5r_37",Sn="_gitHubLink_1ae5r_47";var z={header:yn,startStop:bn,file:wn,realtime:kn,gitHubLink:Sn};const En=()=>{var f;const[e,t]=oe(!1),n=dt(),r=(f=n.state.renderer)==null?void 0:f.type,i=()=>{n.setRenderer(r&&r!=="file"?void 0:{type:"realtime"})},o=()=>{vn({multiple:!1,accept:"audio/*"}).then(a=>{n.setRenderer({file:a,type:"file"})})},c=()=>{const a=n.state.rendererInstance;(a==null?void 0:a.name)==="RealtimeSpectrumRenderer"&&(a.state.rendering?a.stop():a.start())};return G(()=>{const a=n.state.rendererInstance;(a==null?void 0:a.name)==="RealtimeSpectrumRenderer"&&(a.on("start",()=>t(!0)),a.on("stop",()=>t(!1)),t(a.state.rendering))},[n.state.rendererInstance]),pe("div",{className:z.header,children:[r==="realtime"&&B("button",{className:z.startStop,onClick:c,children:e?"Pause":"Resume"}),B("button",{className:z.realtime,onClick:i,children:r==="realtime"?"Reset":"Record"}),B("button",{className:z.file,onClick:o,children:"ANALYZE FILE"}),B("a",{href:"https://github.com/Simonwep/spectrum",className:z.gitHubLink,children:pe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[B("path",{fill:"none",d:"M0 0h24v24H0z"}),B("path",{d:"M12 2C6.475 2 2 6.475 2 12a9.994 9.994 0 0 0 6.838 9.488c.5.087.687-.213.687-.476 0-.237-.013-1.024-.013-1.862-2.512.463-3.162-.612-3.362-1.175-.113-.288-.6-1.175-1.025-1.413-.35-.187-.85-.65-.013-.662.788-.013 1.35.725 1.538 1.025.9 1.512 2.338 1.087 2.912.825.088-.65.35-1.087.638-1.337-2.225-.25-4.55-1.113-4.55-4.938 0-1.088.387-1.987 1.025-2.688-.1-.25-.45-1.275.1-2.65 0 0 .837-.262 2.75 1.026a9.28 9.28 0 0 1 2.5-.338c.85 0 1.7.112 2.5.337 1.912-1.3 2.75-1.024 2.75-1.024.55 1.375.2 2.4.1 2.65.637.7 1.025 1.587 1.025 2.687 0 3.838-2.337 4.688-4.562 4.938.362.312.675.912.675 1.85 0 1.337-.013 2.412-.013 2.75 0 .262.188.574.688.474A10.016 10.016 0 0 0 22 12c0-5.525-4.475-10-10-10z"})]})})]})},$n="_app_16p5u_1";var xn={app:$n};const Rn=()=>pe("div",{className:xn.app,children:[B(En,{}),B(gn,{})]});ge(B(Rn,{}),document.getElementById("app"));It();
