(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var se,v,Pe,G,ye,te={},Ue=[],rt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function x(e,t){for(var n in t)e[n]=t[n];return e}function $e(e){var t=e.parentNode;t&&t.removeChild(e)}function ot(e,t,n){var o,s,r,c={};for(r in t)r=="key"?o=t[r]:r=="ref"?s=t[r]:c[r]=t[r];if(arguments.length>2&&(c.children=arguments.length>3?se.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)c[r]===void 0&&(c[r]=e.defaultProps[r]);return K(e,c,o,s,null)}function K(e,t,n,o,s){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++Pe};return s==null&&v.vnode!=null&&v.vnode(r),r}function it(){return{current:null}}function Z(e){return e.children}function J(e,t){this.props=e,this.context=t}function j(e,t){if(t==null)return e.__?j(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?j(e):null}function ze(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ze(e)}}function Ee(e){(!e.__d&&(e.__d=!0)&&G.push(e)&&!ne.__r++||ye!==v.debounceRendering)&&((ye=v.debounceRendering)||setTimeout)(ne)}function ne(){for(var e;ne.__r=G.length;)e=G.sort(function(t,n){return t.__v.__b-n.__v.__b}),G=[],e.some(function(t){var n,o,s,r,c,a;t.__d&&(c=(r=(n=t).__v).__e,(a=n.__P)&&(o=[],(s=x({},r)).__v=r.__v+1,pe(a,r,s,n.__n,a.ownerSVGElement!==void 0,r.__h!=null?[c]:null,o,c??j(r),r.__h),Oe(o,r),r.__e!=c&&ze(r)))})}function He(e,t,n,o,s,r,c,a,l,u){var i,f,d,_,h,m,p,w=o&&o.__k||Ue,g=w.length;for(n.__k=[],i=0;i<t.length;i++)if((_=n.__k[i]=(_=t[i])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?K(null,_,null,null,_):Array.isArray(_)?K(Z,{children:_},null,null,null):_.__b>0?K(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_)!=null){if(_.__=n,_.__b=n.__b+1,(d=w[i])===null||d&&_.key==d.key&&_.type===d.type)w[i]=void 0;else for(f=0;f<g;f++){if((d=w[f])&&_.key==d.key&&_.type===d.type){w[f]=void 0;break}d=null}pe(e,_,d=d||te,s,r,c,a,l,u),h=_.__e,(f=_.ref)&&d.ref!=f&&(p||(p=[]),d.ref&&p.push(d.ref,null,_),p.push(f,_.__c||h,_)),h!=null?(m==null&&(m=h),typeof _.type=="function"&&_.__k===d.__k?_.__d=l=Fe(_,l,e):l=Ve(e,_,d,w,h,l),typeof n.type=="function"&&(n.__d=l)):l&&d.__e==l&&l.parentNode!=e&&(l=j(d))}for(n.__e=m,i=g;i--;)w[i]!=null&&We(w[i],w[i]);if(p)for(i=0;i<p.length;i++)qe(p[i],p[++i],p[++i])}function Fe(e,t,n){for(var o,s=e.__k,r=0;s&&r<s.length;r++)(o=s[r])&&(o.__=e,t=typeof o.type=="function"?Fe(o,t,n):Ve(n,o,o,s,o.__e,t));return t}function Ve(e,t,n,o,s,r){var c,a,l;if(t.__d!==void 0)c=t.__d,t.__d=void 0;else if(n==null||s!=r||s.parentNode==null)e:if(r==null||r.parentNode!==e)e.appendChild(s),c=null;else{for(a=r,l=0;(a=a.nextSibling)&&l<o.length;l+=1)if(a==s)break e;e.insertBefore(s,r),c=r}return c!==void 0?c:s.nextSibling}function st(e,t,n,o,s){var r;for(r in n)r==="children"||r==="key"||r in t||re(e,r,null,n[r],o);for(r in t)s&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===t[r]||re(e,r,t[r],n[r],o)}function we(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||rt.test(t)?n:n+"px"}function re(e,t,n,o,s){var r;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||we(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||we(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o||e.addEventListener(t,r?Se:Re,r):e.removeEventListener(t,r?Se:Re,r);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,n))}}function Re(e){this.l[e.type+!1](v.event?v.event(e):e)}function Se(e){this.l[e.type+!0](v.event?v.event(e):e)}function pe(e,t,n,o,s,r,c,a,l){var u,i,f,d,_,h,m,p,w,g,T,C,$,z,M,E=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,a=t.__e=n.__e,t.__h=null,r=[a]),(u=v.__b)&&u(t);try{e:if(typeof E=="function"){if(p=t.props,w=(u=E.contextType)&&o[u.__c],g=u?w?w.props.value:u.__:o,n.__c?m=(i=t.__c=n.__c).__=i.__E:("prototype"in E&&E.prototype.render?t.__c=i=new E(p,g):(t.__c=i=new J(p,g),i.constructor=E,i.render=at),w&&w.sub(i),i.props=p,i.state||(i.state={}),i.context=g,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),E.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=x({},i.__s)),x(i.__s,E.getDerivedStateFromProps(p,i.__s))),d=i.props,_=i.state,f)E.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(E.getDerivedStateFromProps==null&&p!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(p,g),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(p,i.__s,g)===!1||t.__v===n.__v){for(i.props=p,i.state=i.__s,t.__v!==n.__v&&(i.__d=!1),i.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(R){R&&(R.__=t)}),T=0;T<i._sb.length;T++)i.__h.push(i._sb[T]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(p,i.__s,g),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,_,h)})}if(i.context=g,i.props=p,i.__v=t,i.__P=e,C=v.__r,$=0,"prototype"in E&&E.prototype.render){for(i.state=i.__s,i.__d=!1,C&&C(t),u=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,C&&C(t),u=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++$<25);i.state=i.__s,i.getChildContext!=null&&(o=x(x({},o),i.getChildContext())),f||i.getSnapshotBeforeUpdate==null||(h=i.getSnapshotBeforeUpdate(d,_)),M=u!=null&&u.type===Z&&u.key==null?u.props.children:u,He(e,Array.isArray(M)?M:[M],t,n,o,s,r,c,a,l),i.base=t.__e,t.__h=null,i.__h.length&&c.push(i),m&&(i.__E=i.__=null),i.__e=!1}else r==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ct(n.__e,t,n,o,s,r,c,l);(u=v.diffed)&&u(t)}catch(R){t.__v=null,(l||r!=null)&&(t.__e=a,t.__h=!!l,r[r.indexOf(a)]=null),v.__e(R,t,n)}}function Oe(e,t){v.__c&&v.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(o){o.call(n)})}catch(o){v.__e(o,n.__v)}})}function ct(e,t,n,o,s,r,c,a){var l,u,i,f=n.props,d=t.props,_=t.type,h=0;if(_==="svg"&&(s=!0),r!=null){for(;h<r.length;h++)if((l=r[h])&&"setAttribute"in l==!!_&&(_?l.localName===_:l.nodeType===3)){e=l,r[h]=null;break}}if(e==null){if(_===null)return document.createTextNode(d);e=s?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,d.is&&d),r=null,a=!1}if(_===null)f===d||a&&e.data===d||(e.data=d);else{if(r=r&&se.call(e.childNodes),u=(f=n.props||te).dangerouslySetInnerHTML,i=d.dangerouslySetInnerHTML,!a){if(r!=null)for(f={},h=0;h<e.attributes.length;h++)f[e.attributes[h].name]=e.attributes[h].value;(i||u)&&(i&&(u&&i.__html==u.__html||i.__html===e.innerHTML)||(e.innerHTML=i&&i.__html||""))}if(st(e,d,f,s,a),i)t.__k=[];else if(h=t.props.children,He(e,Array.isArray(h)?h:[h],t,n,o,s&&_!=="foreignObject",r,c,r?r[0]:n.__k&&j(n,0),a),r!=null)for(h=r.length;h--;)r[h]!=null&&$e(r[h]);a||("value"in d&&(h=d.value)!==void 0&&(h!==e.value||_==="progress"&&!h||_==="option"&&h!==f.value)&&re(e,"value",h,f.value,!1),"checked"in d&&(h=d.checked)!==void 0&&h!==e.checked&&re(e,"checked",h,f.checked,!1))}return e}function qe(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){v.__e(o,n)}}function We(e,t,n){var o,s;if(v.unmount&&v.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||qe(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){v.__e(r,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(s=0;s<o.length;s++)o[s]&&We(o[s],t,n||typeof e.type!="function");n||e.__e==null||$e(e.__e),e.__=e.__e=e.__d=void 0}function at(e,t,n){return this.constructor(e,n)}function lt(e,t,n){var o,s,r;v.__&&v.__(e,t),s=(o=typeof n=="function")?null:n&&n.__k||t.__k,r=[],pe(t,e=(!o&&n||t).__k=ot(Z,null,[e]),s||te,te,t.ownerSVGElement!==void 0,!o&&n?[n]:s?null:t.firstChild?se.call(t.childNodes):null,r,!o&&n?n:s?s.__e:t.firstChild,o),Oe(r,e)}se=Ue.slice,v={__e:function(e,t,n,o){for(var s,r,c;t=t.__;)if((s=t.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(e)),c=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,o||{}),c=s.__d),c)return s.__E=s}catch(a){e=a}throw e}},Pe=0,J.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x({},this.state),typeof e=="function"&&(e=e(x({},n),this.props)),e&&x(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ee(this))},J.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ee(this))},J.prototype.render=Z,G=[],ne.__r=0;const _t="modulepreload",ut=function(e){return"/"+e},be={},ft=function(t,n,o){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=ut(r),r in be)return;be[r]=!0;const c=r.endsWith(".css"),a=c?'[rel="stylesheet"]':"";if(!!o)for(let i=s.length-1;i>=0;i--){const f=s[i];if(f.href===r&&(!c||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":_t,c||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),c)return new Promise((i,f)=>{u.addEventListener("load",i),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function dt(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:o,onRegistered:s,onRegisteredSW:r,onRegisterError:c}=e;let a,l;const u=async(f=!0)=>{await l};async function i(){if("serviceWorker"in navigator){const{Workbox:f}=await ft(()=>import("./workbox-window.prod.es5-295a6886.js"),[]);a=new f("./sw.js",{scope:"./",type:"classic"}),a.addEventListener("activated",d=>{!d.isUpdate&&d.isExternal||d.isUpdate?window.location.reload():o==null||o()}),a.register({immediate:t}).then(d=>{r?r("./sw.js",d):s==null||s(d)}).catch(d=>{c==null||c(d)})}}return l=i(),u}const Ge=(e,t,n)=>{let o=-1;for(let r=0;r<e.length;r++){const c=e[r];for(let a=0;a<c.length;a++){const l=a/c.length*(t/2);c[a]>n&&l>o&&(o=l)}}let s=2;for(;s/2<=o;)s*=2;return s},_e=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),ht=(e,t,n)=>{let o,s,r;if(t===0)o=s=r=n;else{const c=n<.5?n*(1+t):n+t-n*t,a=2*n-c;o=_e(a,c,e+1/3),s=_e(a,c,e),r=_e(a,c,e-1/3)}return[Math.round(o*255),Math.round(s*255),Math.round(r*255)]},V=e=>e*window.devicePixelRatio,ke=270,Ae=300,je=new Array(256);for(let e=0;e<=255;e++){const t=je[255-e]=new Uint8ClampedArray(4),n=e/255*Ae,o=n>ke?.5*((300-n)/(Ae-ke)):.5;t.set(ht(n/360,1,o),0),t[3]=255}const S={SPECTRUM_UI_FONT_SIZE:`${V(10)}px monospace`,SPECTRUM_UI_COLORS:je,SPECTRUM_BACKGROUND:new Uint8ClampedArray([0,0,0,255]),RENDERER_BASE_SAMPLE_RATE:192e3,RENDERER_MIN_VISIBLE_LOUDNESS:14,RENDERER_MIN_DECIBELS:-120,RENDERER_MAX_DECIBELS:-20},pt=async(e,t)=>new AudioContext(t).decodeAudioData(await e.arrayBuffer()),Ze=e=>{const t=document.createElement("canvas"),n=t.getContext("2d",e);return[t,n]},Xe=()=>{const e=new Map;return{emit(t,...n){var o;(o=e.get(t))==null||o.forEach(s=>s(...n))},on(t,n){e.set(t,[...e.get(t)??[],n])},off(t,n){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(s=>s!==n))??[])},unbindAll(){e.clear()}}},mt=e=>{let t=-1;const n=()=>{e(),t=requestAnimationFrame(n)};return t=requestAnimationFrame(n),()=>cancelAnimationFrame(t)},Ye=e=>{let t=2;for(;t/2<=e;)t*=2;return t},Ke="RealtimeSpectrumRenderer",gt=(e,t)=>{const[n,o]=Ze(),{on:s,off:r,emit:c}=Xe();let a=!1,l,u,i,f=S.RENDERER_BASE_SAMPLE_RATE,d=f,_=-1,h=0;const m={start:0,end:0},p=[],w=()=>{l&&u&&c("update",{canvas:n,time:m,audioContext:l,sampleRate:f,audioAnalyzer:u,bufferSize:h})},g=()=>{if(!p.length)return;const{width:M,height:E}=n,R=p.slice(-M),L=new ImageData(R.length,E);for(let k=0;k<L.data.length;k+=4){const P=E-Math.floor(k/4/L.width),D=k/4%L.width,I=R[D],A=Math.floor(P*(f/S.RENDERER_BASE_SAMPLE_RATE)),B=I.buffer[A];L.data.set(B?e[B]:t,k)}_=Math.min(R.length-1),o.putImageData(L,0,0)},T=(M,E)=>{n.width=M,n.height=E,g(),w()},C=async()=>{await $(),await(l==null?void 0:l.close()),u=void 0,l=void 0,a=!1,c("destroy")},$=async()=>{a=!1,i==null||i(),c("stop")};return{on:s,off:r,name:Ke,sampleRate:f,resize:T,start:async()=>{if(a)return;const M=performance.now();a=!0;const E=await navigator.mediaDevices.getUserMedia({audio:{deviceId:"default"}});await(l==null?void 0:l.close()),l=new AudioContext({sampleRate:S.RENDERER_BASE_SAMPLE_RATE});const R=u=l.createAnalyser();R.smoothingTimeConstant=0,R.minDecibels=S.RENDERER_MIN_DECIBELS,R.maxDecibels=S.RENDERER_MAX_DECIBELS,l.createMediaStreamSource(E).connect(u),i=mt(()=>{var U;const{height:k,width:P}=n;R.fftSize=Ye(k);const D=new Uint8Array(R.frequencyBinCount),I=new ImageData(1,k),A=Math.ceil(performance.now()-M);R.getByteFrequencyData(D),f=Math.max(Ge([D],S.RENDERER_BASE_SAMPLE_RATE,S.RENDERER_MIN_VISIBLE_LOUDNESS),p.length?f:0),f!==d&&(g(),d=f);for(let H=0;H<k;H++){const X=Math.floor(H*(f/S.RENDERER_BASE_SAMPLE_RATE)),Y=D[X],le=(k-H-1)*4;I.data.set(Y?e[Y]:t,le)}const B=p.length?(((U=p.at(-1))==null?void 0:U.at)??0)/1e3/p.length:0;_===P-1?(o.globalCompositeOperation="copy",o.drawImage(n,-1,0),o.putImageData(I,_,0),o.globalCompositeOperation="source-over",m.end=B*p.length,m.start=B*(p.length-P)):(o.putImageData(I,++_,0),m.end=B*P),p.push({buffer:D,at:A}),h+=D.length,w()}),c("start")},stop:$,destroy:C,isRecording:()=>a}},fe=e=>typeof e=="object"&&(e==null?void 0:e.name)===Ke,Je="AudioFileSpectrumRenderer",vt=e=>{const[t,n]=Ze(),{on:o,off:s,emit:r}=Xe();let c=!1,a=!1,l=S.RENDERER_BASE_SAMPLE_RATE,u,i,f,d,_,h,m;const p=()=>{d&&u&&i&&f&&r("update",{canvas:t,audioFile:d,audioContext:u,audioAnalyzer:i,audioBuffer:f,audio:m,sampleRate:l})},w=async(E=d)=>{if(c||!E)return;_&&URL.revokeObjectURL(_),m==null||m.pause(),r("pause"),r("start"),m=void 0,_=void 0,a=!1,c=!0,d=E,f=await pt(E,{sampleRate:S.RENDERER_BASE_SAMPLE_RATE});const{width:R,height:L}=t,k=new Array(R);u=new OfflineAudioContext(f),i=u.createAnalyser(),i.connect(u.destination),i.fftSize=Ye(L),i.smoothingTimeConstant=0,i.minDecibels=S.RENDERER_MIN_DECIBELS,i.maxDecibels=S.RENDERER_MAX_DECIBELS;const P=f.duration/k.length,D=i.frequencyBinCount;for(let A=0;A<k.length;A++){const B=A*P;u.suspend(B).then(()=>{u==null||u.resume(),i==null||i.getByteFrequencyData(k[A]=new Uint8Array(D))})}const I=u.createBufferSource();I.buffer=f,I.connect(i),I.start(),await u.startRendering(),l=Ge(k,S.RENDERER_BASE_SAMPLE_RATE,S.RENDERER_MIN_VISIBLE_LOUDNESS),h=new ImageData(R,L);for(let A=0;A<R;A++){const B=k[A];for(let U=0;U<L;U++){const H=Math.floor(U*(l/S.RENDERER_BASE_SAMPLE_RATE)),X=B[H];if(X){const Y=(A+(L-U-1)*R)*4,le=e[X];h.data.set(le,Y)}}}n.putImageData(h,0,0),c=!1,r("stop"),p()},g=async()=>{c||!d||!h||a||(_=_??URL.createObjectURL(d),m=m??new Audio(_),r("beforePlay"),m.addEventListener("timeupdate",()=>{if(!h||!m)return;n.putImageData(h,0,0);const E=Math.floor(m.currentTime/m.duration*t.width);E&&(n.fillStyle="white",n.fillRect(E,0,1,t.height)),p()}),await m.play(),a=!0,r("play"))},T=()=>{m==null||m.pause(),a=!1,_&&URL.revokeObjectURL(_),r("pause")};return{on:o,off:s,name:Je,sampleRate:l,resize:(E,R)=>{t.width=E,t.height=R,w()},render:w,destroy:()=>{T(),c=!1,r("destroy")},play:g,pause:T,rewind:()=>{m&&(m.currentTime=0)},setVolume:E=>{m&&(m.volume=E)},isPlaying:()=>a,isRendering:()=>c}},W=e=>typeof e=="object"&&(e==null?void 0:e.name)===Je,ce=({width:e,height:t},{top:n,left:o,bottom:s,right:r})=>new DOMRect(o,n,e-o-r,t-n-s),me=(e,t)=>{let n=2;for(;;){const o=n*2+n%2;if(t/o<e)break;n=o}return[n,t/n]},yt={minDecibels:-120,maxDecibels:-20},Et=({context:e,margin:t,layout:n,decibelRange:o=yt})=>{const s=ce(e.canvas,t),r=s.right+10,c=s.top-1,a=r+n.width,l=s.bottom+1,u=e.createLinearGradient(r,c,a,l),i=S.SPECTRUM_UI_COLORS;for(let h=0;h<i.length;h++){const[m,p,w]=i[i.length-h-1];u.addColorStop(h/i.length,`rgb(${m}, ${p}, ${w})`)}e.fillStyle=u,e.fillRect(r,c,n.width,s.height),e.textAlign="left",e.textBaseline="middle",e.font=S.SPECTRUM_UI_FONT_SIZE;const[f,d]=me(n.tickMinDistance,s.height),_=o.minDecibels-o.maxDecibels;for(let h=0;h<=f;h++){const m=c+h*d,p=`${Math.floor(h/f*_+o.maxDecibels)} dB`;e.fillStyle=u,e.fillRect(a,m,n.tickLength,n.tickThickness),e.fillStyle="white",e.fillText(p,a+n.tickLength+2,m+1)}},wt=({context:e,margin:t,layout:n,sampleRate:o=96e3})=>{const s=ce(e.canvas,t),r=s.height+1,c=o/2/1e3,[a,l]=me(n.tickMinDistance,r);e.textAlign="right",e.textBaseline="middle";for(let u=0;u<=a;u++){const i=s.top+u*l-1,f=`${Math.floor((a-u)/a*c)} kHz`;e.fillRect(s.left-n.tickLength,i,n.tickLength,n.tickThickness),e.fillText(f,s.left-n.tickLength-2,i+1)}},Rt=({context:e,margin:t,text:n})=>{e.fillStyle="white",e.textAlign="left",e.textBaseline="bottom",e.font=S.SPECTRUM_UI_FONT_SIZE,e.fillText(n,t.left,t.top-V(8))},oe=e=>{const t=Math.floor(e);return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`},St=({context:e,time:t,layout:n,margin:o,currentTime:s})=>{const r=ce(e.canvas,o),c=t.end-t.start,a=r.width+1,[l,u]=me(n.tickMinDistance*2,a);e.strokeStyle="white",e.fillStyle="white",e.textAlign="center",e.textBaseline="hanging",e.font=S.SPECTRUM_UI_FONT_SIZE;const i=[];for(let f=0;f<=l;f++){const d=r.left+f*u-1,_=oe(t.start+f/l*c);e.fillRect(d,r.bottom,n.tickThickness,n.tickLength),e.fillText(_,d,r.bottom+n.tickLength+2),i.push([d,d+e.measureText(_).width])}if(s!==void 0){const f=Math.floor(r.left+s/c*a),d=r.bottom+1,_=n.tickLength/2;e.fillStyle="white",e.fillRect(f,d,n.tickThickness,_);const h=oe(s),m=e.measureText(h);i.some(p=>f+m.width>p[0]&&f<p[1])||e.fillText(h,f,r.bottom+_+2)}};var ae,b,ue,Me,ie=0,Qe=[],Q=[],Le=v.__b,Be=v.__r,Te=v.diffed,De=v.__c,Ie=v.unmount;function ge(e,t){v.__h&&v.__h(b,e,ie||t),ie=0;var n=b.__H||(b.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Q}),n.__[e]}function O(e){return ie=1,bt(tt,e)}function bt(e,t,n){var o=ge(ae++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):tt(void 0,t),function(r){var c=o.__N?o.__N[0]:o.__[0],a=o.t(c,r);c!==a&&(o.__N=[a,o.__[1]],o.__c.setState({}))}],o.__c=b,!b.u)){b.u=!0;var s=b.shouldComponentUpdate;b.shouldComponentUpdate=function(r,c,a){if(!o.__c.__H)return!0;var l=o.__c.__H.__.filter(function(i){return i.__c});if(l.every(function(i){return!i.__N}))return!s||s.call(this,r,c,a);var u=!1;return l.forEach(function(i){if(i.__N){var f=i.__[0];i.__=i.__N,i.__N=void 0,f!==i.__[0]&&(u=!0)}}),!(!u&&o.__c.props===r)&&(!s||s.call(this,r,c,a))}}return o.__N||o.__}function q(e,t){var n=ge(ae++,3);!v.__s&&et(n.__H,t)&&(n.__=e,n.i=t,b.__H.__h.push(n))}function kt(e){return ie=5,At(function(){return{current:e}},[])}function At(e,t){var n=ge(ae++,7);return et(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Mt(){for(var e;e=Qe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ee),e.__H.__h.forEach(de),e.__H.__h=[]}catch(t){e.__H.__h=[],v.__e(t,e.__v)}}v.__b=function(e){b=null,Le&&Le(e)},v.__r=function(e){Be&&Be(e),ae=0;var t=(b=e.__c).__H;t&&(ue===b?(t.__h=[],b.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Q,n.__N=n.i=void 0})):(t.__h.forEach(ee),t.__h.forEach(de),t.__h=[])),ue=b},v.diffed=function(e){Te&&Te(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qe.push(t)!==1&&Me===v.requestAnimationFrame||((Me=v.requestAnimationFrame)||Lt)(Mt)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Q&&(n.__=n.__V),n.i=void 0,n.__V=Q})),ue=b=null},v.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ee),n.__h=n.__h.filter(function(o){return!o.__||de(o)})}catch(o){t.some(function(s){s.__h&&(s.__h=[])}),t=[],v.__e(o,n.__v)}}),De&&De(e,t)},v.unmount=function(e){Ie&&Ie(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{ee(o)}catch(s){t=s}}),n.__H=void 0,t&&v.__e(t,n.__v))};var Ce=typeof requestAnimationFrame=="function";function Lt(e){var t,n=function(){clearTimeout(o),Ce&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Ce&&(t=requestAnimationFrame(n))}function ee(e){var t=b,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),b=t}function de(e){var t=b;e.__c=e.__(),b=t}function et(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function tt(e,t){return typeof t=="function"?t(e):t}const Bt={renderer:void 0,rendererInstance:void 0},he=new Set,Tt=e=>{he.forEach(t=>t(e))},Dt=e=>{switch(e==null?void 0:e.type){case"file":{const t=vt(S.SPECTRUM_UI_COLORS);return requestAnimationFrame(()=>void t.render(e.file)),t}case"realtime":{const t=gt(S.SPECTRUM_UI_COLORS,S.SPECTRUM_BACKGROUND);return t.start(),t}default:return}},nt=()=>{const[e,t]=O(Bt),n=async o=>{var r;await((r=e.rendererInstance)==null?void 0:r.destroy());const s=Dt(o);Tt({...e,renderer:o,rendererInstance:s})};return q(()=>(he.add(t),()=>he.delete(t))),{state:e,changeRenderer:n}},It=(e,t=devicePixelRatio)=>{e.width=0,e.height=0;const n=e.getBoundingClientRect(),o=Math.round(t*n.right)-Math.round(t*n.left),s=Math.round(t*n.bottom)-Math.round(t*n.top);return{width:o,height:s}},Ct=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Nt=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],xt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Pt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Ne=(e,t,n)=>{let o=e;return typeof t=="string"||Array.isArray(t)?o=e.toLocaleString(t,n):(t===!0||n!==void 0)&&(o=e.toLocaleString(void 0,n)),o};function Ut(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,...t};const n=t.bits?t.binary?Pt:xt:t.binary?Nt:Ct;if(t.signed&&e===0)return` 0 ${n[0]}`;const o=e<0,s=o?"-":t.signed?"+":"";o&&(e=-e);let r;if(t.minimumFractionDigits!==void 0&&(r={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(r={maximumFractionDigits:t.maximumFractionDigits,...r}),e<1){const u=Ne(e,t.locale,r);return s+u+" "+n[0]}const c=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=(t.binary?1024:1e3)**c,r||(e=e.toPrecision(3));const a=Ne(Number(e),t.locale,r),l=n[c];return s+a+" "+l}const $t="a",zt={canvas:$t};var Ht=0;function y(e,t,n,o,s){var r,c,a={};for(c in t)c=="ref"?r=t[c]:a[c]=t[c];var l={type:e,props:a,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Ht,__source:s,__self:o};if(typeof e=="function"&&(r=e.defaultProps))for(c in r)a[c]===void 0&&(a[c]=r[c]);return v.vnode&&v.vnode(l),l}const N={top:V(35),right:V(100),bottom:V(35),left:V(65)},ve={tickMinDistance:50,tickThickness:1,tickLength:10},Ft={...ve,width:10},Vt={...ve},Ot=()=>{const[e,t]=O(),n=kt(null),o=nt(),s=(c,a,l,u,i,f,d)=>{if(!n.current||!e)return;const _=ce(n.current,N);e.clearRect(0,0,n.current.width,n.current.height),a&&e.drawImage(a,N.left,N.top),e.fillStyle="white",e.strokeStyle="white",e.strokeRect(_.left-.5,_.top-.5,_.width+1,_.height+1),l&&St({context:e,margin:N,time:l,currentTime:f==null?void 0:f.currentTime,layout:ve}),Et({context:e,margin:N,decibelRange:u,layout:Ft}),wt({context:e,margin:N,layout:Vt,sampleRate:d}),Rt({context:e,margin:N,text:c})},r=()=>{var d;if(!n.current||!e)return;const{width:c,height:a}=It(n.current),{top:l,right:u,bottom:i,left:f}=N;n.current.width=c,n.current.height=a,s(o.state.renderer?"Loading...":"Activate microphone or select an file to analyze..."),(d=o.state.rendererInstance)==null||d.resize(c-f-u,a-l-i)};return q(()=>(r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r))),q(()=>{var c;t((c=n.current)==null?void 0:c.getContext("2d",{alpha:!1}))},[n]),q(()=>{if(!e)return;const c=o.state.rendererInstance;if(fe(c))return c.on("update",a=>{const l=Ut(a.bufferSize,{minimumFractionDigits:2,maximumFractionDigits:2});s(`Recording with a sample-rate of ~${a.sampleRate.toLocaleString()} (Buffer: ${l})`,a.canvas,a.time,a.audioAnalyzer,a.audioContext,void 0,a.sampleRate)});if(W(c))return c.on("update",a=>{const{length:l,duration:u,numberOfChannels:i}=a.audioBuffer,{name:f,type:d}=a.audioFile,{currentTime:_}=a.audio??{currentTime:0},h=l/u*8/1e3,m=`${f} (${d}, ~${a.sampleRate.toLocaleString()} Hz, ${h}kbps, ${i} channels)`+(a.audio?` (playing - ${oe(_)} / ${oe(u)})`:"");s(m,a.canvas,{start:0,end:a.audioBuffer.duration},a.audioAnalyzer,a.audioContext,a.audio,a.sampleRate)});r()},[o.state.rendererInstance]),y("div",{className:zt.canvas,style:"color: red",children:y("canvas",{ref:n})})},qt="e",Wt={slider:qt},Gt=e=>{const t=it();let n=0,o=0;const s=a=>{var l,u;window.addEventListener("pointermove",r),window.addEventListener("pointerup",c),window.addEventListener("pointercancel",c),window.addEventListener("pointerleave",c),o=((l=t.current)==null?void 0:l.getBoundingClientRect().left)??0,n=((u=t.current)==null?void 0:u.clientWidth)??0,r(a)},r=a=>{const l=(a.clientX-o)/n;e.onChange(Math.max(0,Math.min(1,l)))},c=()=>{window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",c),window.removeEventListener("pointercancel",c),window.removeEventListener("pointerleave",c)};return y("div",{ref:t,className:Wt.slider,onPointerDown:s,style:{"--value":e.value}})},jt=({accept:e,multiple:t}={})=>{const n=document.createElement("input");return document.body.appendChild(n),n.type="file",n.style.display="none",e&&(n.accept=e),t&&(n.multiple=t),new Promise((o,s)=>{n.onchange=()=>{const r=Array.from(n.files??[]);r.length?o(t?r:r[0]):s()},document.body.removeChild(n),n.click()})},Zt="d",Xt={icon:Zt},Yt={mic:y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M12 3a3 3 0 0 0-3 3v4a3 3 0 0 0 6 0V6a3 3 0 0 0-3-3zm0-2a5 5 0 0 1 5 5v4a5 5 0 0 1-10 0V6a5 5 0 0 1 5-5zM3.055 11H5.07a7.002 7.002 0 0 0 13.858 0h2.016A9.004 9.004 0 0 1 13 18.945V23h-2v-4.055A9.004 9.004 0 0 1 3.055 11z"})}),"mic-off":y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M16.425 17.839A8.941 8.941 0 0 1 13 18.945V23h-2v-4.055A9.004 9.004 0 0 1 3.055 11H5.07a7.002 7.002 0 0 0 9.87 5.354l-1.551-1.55A5 5 0 0 1 7 10V8.414L1.393 2.808l1.415-1.415 19.799 19.8-1.415 1.414-4.767-4.768zm-7.392-7.392l2.52 2.52a3.002 3.002 0 0 1-2.52-2.52zm10.342 4.713l-1.443-1.442c.509-.81.856-1.73.997-2.718h2.016a8.95 8.95 0 0 1-1.57 4.16zm-2.91-2.909l-1.548-1.548c.054-.226.083-.46.083-.703V6a3 3 0 0 0-5.818-1.032L7.686 3.471A5 5 0 0 1 17 6v4a4.98 4.98 0 0 1-.534 2.251z"})}),play:y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z"})}),pause:y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h2v6H9V9zm4 0h2v6h-2V9z"})}),reset:y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-9 3h2v6H9v-6zm4 0h2v6h-2v-6zM9 4v2h6V4H9z"})}),rewind:y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M12 10.667l9.223-6.149a.5.5 0 0 1 .777.416v14.132a.5.5 0 0 1-.777.416L12 13.333v5.733a.5.5 0 0 1-.777.416L.624 12.416a.5.5 0 0 1 0-.832l10.599-7.066a.5.5 0 0 1 .777.416v5.733zm-2 5.596V7.737L3.606 12 10 16.263zm10 0V7.737L13.606 12 20 16.263z"})}),file:y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M9 2.003V2h10.998C20.55 2 21 2.455 21 2.992v18.016a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 20.993V8l6-5.997zM5.83 8H9V4.83L5.83 8zM11 4v5a1 1 0 0 1-1 1H5v10h14V4h-8z"})}),"file-music":y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M16 8v2h-3v4.5a2.5 2.5 0 1 1-2-2.45V8h4V4H5v16h14V8h-3zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008V2.992z"})}),github:y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:y("path",{d:"M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588-.094-.117.34.427.433.539.19.227.33.365.44.438.204.137.587.196 1.15.14.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308 1.477-.933 2.613-1.226 3.422-1.096.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19.691.936 1.058 2.045 1.058 3.293 0 3.757-1.674 5.665-4.642 6.392.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716 1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446.005-.705c.005-.708.007-1.338.007-1.998 0-.697-.183-1.152-.425-1.36-.661-.57-.326-1.655.54-1.752 2.967-.333 4.337-1.482 4.337-4.66 0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66.865.097 1.201 1.177.544 1.748-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z"})})},F=e=>y("span",{className:Xt.icon,children:Yt[e.icon]}),Kt="b",Jt="c",xe={header:Kt,gitHubLink:Jt},Qt=()=>{var h,m,p,w;const[e,t]=O(!1),[n,o]=O(!1),[s,r]=O(!1),[c,a]=O(.2),l=nt(),u=()=>{l.changeRenderer(void 0)},i=()=>{jt({multiple:!1,accept:"audio/*"}).then(g=>{l.changeRenderer({file:g,type:"file"})})},f=()=>{const g=l.state.rendererInstance;fe(g)?g.isRecording()?g.stop():g.start():l.changeRenderer({type:"realtime"})},d=()=>{const g=l.state.rendererInstance;W(g)?g.isPlaying()?g.pause():g.play():l.changeRenderer({type:"realtime"})},_=()=>{W(l.state.rendererInstance)&&l.state.rendererInstance.rewind()};return q(()=>{const g=l.state.rendererInstance;W(g)?(g.on("pause",()=>r(!1)),g.on("beforePlay",()=>g.setVolume(c)),g.on("play",()=>r(!0)),g.on("start",()=>t(!0)),g.on("stop",()=>t(!1)),r(g.isPlaying()),t(g.isRendering())):fe(g)&&(g.on("start",()=>o(!0)),g.on("stop",()=>o(!1)),o(g.isRecording()),t(g.isRecording()))},[(h=l.state.rendererInstance)==null?void 0:h.name]),q(()=>{W(l.state.rendererInstance)&&l.state.rendererInstance.setVolume(c)},[c]),y("div",{className:xe.header,children:[y("button",{onClick:f,children:y(F,{icon:n?"mic":"mic-off"})}),((m=l.state.renderer)==null?void 0:m.type)==="realtime"&&y("button",{onClick:u,children:y(F,{icon:"reset"})}),y("button",{onClick:i,children:y(F,{icon:((p=l.state.renderer)==null?void 0:p.type)==="file"?"file-music":"file"})}),((w=l.state.renderer)==null?void 0:w.type)==="file"&&!e&&y(Z,{children:[y("button",{onClick:d,children:y(F,{icon:s?"pause":"play"})}),y("button",{onClick:_,children:y(F,{icon:"rewind"})}),y(Gt,{value:c,onChange:a})]}),y("a",{href:"https://github.com/Simonwep/spectrum",className:xe.gitHubLink,children:y(F,{icon:"github"})})]})},en="_",tn={app:en},nn=()=>y("div",{className:tn.app,children:[y(Qt,{}),y(Ot,{})]});lt(y(nn,{}),document.getElementById("app"));dt();
